(function(t){function e(e){for(var a,i,o=e[0],u=e[1],c=e[2],d=0,m=[];d<o.length;d++)i=o[d],n[i]&&m.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},s=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0531":function(t,e,r){},"0773":function(t,e,r){"use strict";var a=r("463a"),n=r.n(a);n.a},"0fe6":function(t,e,r){"use strict";var a=r("6824"),n=r.n(a);n.a},1818:function(t,e,r){"use strict";var a=r("b529"),n=r.n(a);n.a},"1c14":function(t,e,r){},"1cac":function(t,e,r){"use strict";var a=r("0531"),n=r.n(a);n.a},"27d5":function(t,e,r){"use strict";var a=r("68c7"),n=r.n(a);n.a},2971:function(t,e,r){"use strict";var a=r("2baa"),n=r.n(a);n.a},"2baa":function(t,e,r){},"34e7":function(t,e,r){},"3b45":function(t,e,r){"use strict";var a=r("c6a2"),n=r.n(a);n.a},"3e47":function(t,e,r){},4447:function(t,e,r){"use strict";var a=r("b04c"),n=r.n(a);n.a},"463a":function(t,e,r){},"51f1":function(t,e,r){"use strict";var a=r("dac3"),n=r.n(a);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],o=(a("5c0b"),a("2877")),u={},c=Object(o["a"])(u,s,i,!1,null,null,null),l=c.exports,d=(a("6762"),a("2fdb"),a("7f7f"),a("8c4f")),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Header"),r("div",{staticClass:"container"},[r("Auth_login")],1)],1)},_=[],h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"login-detail section"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("h1",{staticClass:"form__title"},[t._v("登入")]),t.error?r("div",{staticClass:"field update-error"},[t._m(0)]):t._e(),r("div",{staticClass:"field user-account"},[r("div",{staticClass:"input-box control",class:{error:t.empty_error.account}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"input",attrs:{type:"text",id:"login__account",placeholder:" "},domProps:{value:t.account},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},focus:function(e){t.empty_error.account=!1},input:function(e){e.target.composing||(t.account=e.target.value)}}}),t.empty_error.account?r("span",[t._v("不得為空")]):t._e(),r("label",{attrs:{for:"login__account"}},[t._v("使用者帳戶")])])]),r("div",{staticClass:"field user-password"},[r("div",{staticClass:"input-box control",class:{error:t.empty_error.password}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",id:"login__userCode",placeholder:" "},domProps:{value:t.password},on:{focus:function(e){t.empty_error.password=!1},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.empty_error.password?r("span",[t._v("不得為空")]):t._e(),r("label",{attrs:{for:"login__userCode"}},[t._v("密碼")])])]),r("div",{staticClass:"submitStatus"},[r("div",{staticClass:"loginLink"},[r("button",{staticClass:"button is-info is-medium",class:{"is-loading":t.loading_status.login},attrs:{disabled:t.loading_status.login,type:"submit"}},[t._v("\n          登入\n        ")])]),r("div",{staticClass:"registerLink"},[r("router-link",{attrs:{disabled:t.loading_status.login,to:{name:"register"}}},[t._v("\n          註冊\n        ")])],1)])])])},p=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("label",[t._v("\n          帳號或密碼不符\n        ")])])}],f=(a("ac6a"),a("ffc1"),a("96cf"),a("3b8d")),v={name:"Auth_login",data:function(){return{account:this.$route.params.account||"",password:"",empty_error:{account:!1,password:!1},error:!1,loading_status:{login:!1}}},methods:{login:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.detectEmpty(),!e){t.next=4;break}return t.abrupt("return");case 4:return this.loading_status.login=!0,t.next=7,this.$store.dispatch("retrieveMemberToken",{account:this.account,password:this.password});case 7:this.loading_status.login=!1,this.$router.push({name:"order"}),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loading_status.login=!1,this.error=!this.error,console.error("login ERROR",t.t0);case 16:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),detectEmpty:function(){var t={account:this.account,password:this.password};return t.account||(this.empty_error.account=!0),t.password||(this.empty_error.password=!0),Object.entries(t).some(function(t){return!t[1]})}}},g=v,y=(a("ad50"),Object(o["a"])(g,h,p,!1,null,"9f727056",null)),b=y.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"header hero"},["member"===t.loggedIn?[r("div",{staticClass:"header__notification header__notification--member"},[r("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}},[t._v("田阿姨便當")]),r("div",{ref:"dropdownMenu",staticClass:"dropdown--member header__account",on:{click:function(e){t.visible=!t.visible}}},[r("font-awesome-icon",{attrs:{icon:"user-circle",size:"2x"}}),t.visible?r("div",{staticClass:"dropdown-content header__dropdown"},[r("router-link",{attrs:{to:{name:"profile"}}},[t._v("個人檔案")]),r("router-link",{attrs:{to:{name:"order_menu"}}},[t._v("訂餐")]),r("router-link",{attrs:{to:{name:"purchase"}}},[t._v("訂單資訊")]),r("router-link",{attrs:{to:{name:"history"}}},[t._v("歷史訂單")]),r("router-link",{attrs:{to:{name:"logout"}}},[t._v("登出")])],1):t._e()],1)],1)]:"boss"===t.loggedIn?[r("div",{staticClass:"header__notification header__notification--boss"},[r("div",{staticClass:"navbar"},[r("router-link",{staticClass:"logo navbar-brand",attrs:{to:{name:"statistic"}}},[t._v("田阿姨便當")])],1),r("nav",{staticClass:"menuNavbar navbar"},[r("div",{staticClass:"navbar-menu"},[r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"groups"}}},[t._v("管理團體")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"menu"}}},[t._v("新增菜單")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"statistic"}}},[t._v("訂單")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"history"}}},[t._v("歷史統計")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"logout"}}},[t._v("登出")])],1)]),r("div",{ref:"dropdownMenu",staticClass:"link-select navbar-burger burger",on:{click:function(e){t.visible=!t.visible}}},[r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}}),t.visible?r("div",{staticClass:"navbar mobile-nav header__dropdown"},[r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"groups"}}},[t._v("管理團體")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"menu"}}},[t._v("新增菜單")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"statistic"}}},[t._v("訂單")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"history"}}},[t._v("歷史訂單")]),r("router-link",{staticClass:"navbar-item",attrs:{to:{name:"logout"}}},[t._v("登出")])],1):t._e()])])]:[r("div",{staticClass:"header__notification header__notification--guest notification"},[r("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}},[t._v("田阿姨便當")])],1)]],2)},C=[],k={name:"Header",data:function(){return{visible:!1}},destroyed:function(){var t=this.loggedIn;"guest"!==t&&document.removeEventListener("click",this.documentClick)},computed:{loggedIn:function(){var t=this.$store.getters.loggedIn;return"guest"!==t&&document.addEventListener("click",this.documentClick),this.$store.getters.loggedIn}},methods:{documentClick:function(t){var e=this.$refs.dropdownMenu,r=t.target;e&&(e===r||e.contains(r)||(this.visible=!1))}}},M=k,x=(a("8848"),Object(o["a"])(M,w,C,!1,null,"29857ffe",null)),D=x.exports,O={name:"home",created:function(){this.$store.dispatch("retrieveGroups")},components:{Auth_login:b,Header:D}},S=O,$=(a("0fe6"),Object(o["a"])(S,m,_,!1,null,"2fa30136",null)),T=$.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Header"),r("div",{staticClass:"container"},[r("Auth_loginAdmin")],1)],1)},E=[],N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"login-detail"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("h1",[t._v("店家登入")]),t.error?r("div",{staticClass:"field update-error"},[r("span",[t._v("你的帳號或密碼不正確，請稍後再試")])]):t._e(),r("div",{staticClass:"field"},[t._m(0),r("div",{},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"input",attrs:{type:"text",id:"login__account",placeholder:"請輸入使用者名稱"},domProps:{value:t.account},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),r("div",{staticClass:"field"},[t._m(1),r("div",{},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",id:"login__userCode",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),r("button",{staticClass:"button is-info is-medium",class:{"is-loading":t.loading_status.login},attrs:{disabled:t.loading_status.login,type:"submit"}},[t._v("\n      登入\n    ")])])])},j=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",{attrs:{for:"login__account"}},[t._v("使用者帳戶")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",{attrs:{for:"login__userCode"}},[t._v("密碼")])])}],R={name:"Auth_loginAdmin",data:function(){return{account:"",password:"",error:!1,loading_status:{login:!1}}},methods:{login:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.account&&this.password){t.next=3;break}return t.abrupt("return");case 3:return this.loading_status.login=!0,t.next=6,this.$store.dispatch("retrieveBossToken",{account:this.account,password:this.password});case 6:this.loading_status.login=!1,this.$router.push({name:"statistic"}),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading_status.login=!1,this.error=!0,console.error("login ERROR",t.t0);case 15:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()}},A=R,H=(a("27d5"),Object(o["a"])(A,N,j,!1,null,"7404d6a2",null)),G=H.exports,z={name:"home",created:function(){this.$store.dispatch("retrieveGroups")},components:{Auth_loginAdmin:G,Header:D}},L=z,F=(a("c69b"),Object(o["a"])(L,P,E,!1,null,"4349a6df",null)),q=F.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"register"},[r("Header"),r("div",{staticClass:"row "},[r("Auth_register")],1)],1)},U=[],W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"register-detail"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[r("h1",[t._v("註冊")]),r("div",{staticClass:"field"},[r("div",{staticClass:"input-box control",class:{error:t.empty_error.name}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.member.name,expression:"member.name",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",id:"register__name",placeholder:" "},domProps:{value:t.member.name},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},focus:function(e){t.empty_error.name=!1},input:function(e){e.target.composing||t.$set(t.member,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.empty_error.name?r("span",[t._v("不得為空")]):t._e(),r("label",{attrs:{for:"register__name"}},[t._v("使用者名稱")])])]),r("div",{staticClass:"field"},[r("div",{staticClass:"input-box control",class:{error:t.empty_error.account||t.account_been_taken}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.member.account,expression:"member.account",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",id:"register__account",placeholder:" "},domProps:{value:t.member.account},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},focus:function(e){t.empty_error.account=!1},input:function(e){e.target.composing||t.$set(t.member,"account",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.empty_error.account?r("span",[t._v("不得為空")]):t._e(),t.account_been_taken?r("span",[t._v("帳戶重複，請重新輸入")]):t._e(),r("label",{attrs:{for:"register__account"}},[t._v("使用者帳戶")])])]),r("div",{staticClass:"field"},[r("div",{staticClass:"input-box",class:{error:t.empty_error.password}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.member.password,expression:"member.password",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"password",id:"register__code",placeholder:" "},domProps:{value:t.member.password},on:{focus:function(e){t.empty_error.password=!1},input:function(e){e.target.composing||t.$set(t.member,"password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.empty_error.password?r("span",[t._v("不得為空")]):t._e(),r("label",{attrs:{for:"register__code"}},[t._v("密碼")])])]),r("div",{staticClass:"field"},[r("div",{staticClass:"input-box control select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.member.group_id,expression:"member.group_id"}],staticClass:"group--select",attrs:{name:"register__group"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.member,"group_id",e.target.multiple?r:r[0])}}},t._l(t.groups,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),r("label",{attrs:{for:"register__group"}},[t._v("團體")])])]),r("div",{staticClass:"submitStatus"},[r("div",{staticClass:"loginLink"},[r("button",{staticClass:"button is-info is-medium",class:{"is-loading":t.loading_status.register},attrs:{disabled:t.loading_status.register,type:"submit"}},[t._v("\n          註冊\n        ")])]),r("div",{staticClass:"registerLink"},[r("router-link",{attrs:{to:{name:"home"},disabled:t.loading_status.register}},[t._v("\n          登入\n        ")])],1)])])])},B=[],Y={name:"Auth_register",data:function(){return{member:{name:"",account:"",password:"",group_id:null},empty_error:{name:!1,account:!1,password:!1},loading_status:{register:!1},account_been_taken:!1}},created:function(){var t=this;this.$store.dispatch("retrieveGroups").then(function(e){e&&(t.member.group_id=e[0].id)})},computed:{groups:function(){return this.$store.getters.groups}},methods:{register:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.detectEmpty(),!e){t.next=4;break}return t.abrupt("return");case 4:return this.loading_status.register=!0,t.next=7,this.$store.dispatch("register",this.member);case 7:return t.sent,t.next=10,this.$store.dispatch("retrieveMemberToken",{account:this.member.account,password:this.member.password});case 10:this.$router.push({name:"order"}),this.loading_status.register=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),console.error("register ERROR",t.t0),this.loading_status.register=!1,t.t0.includes("invalid")&&(this.account_been_taken=!0);case 19:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),detectEmpty:function(){var t={name:this.member.name,account:this.member.account,password:this.member.password};return t.name||(this.empty_error.name=!0),t.account||(this.empty_error.account=!0),t.password||(this.empty_error.password=!0),Object.entries(t).some(function(t){return!t[1]})}}},J=Y,V=(a("0773"),Object(o["a"])(J,W,B,!1,null,"5e2902af",null)),Z=V.exports,K={name:"register",components:{Auth_register:Z,Header:D}},Q=K,X=(a("bc2c"),Object(o["a"])(Q,I,U,!1,null,"047b3d8c",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"profile"},[r("Header"),r("div",{staticClass:"container"},[t._m(0),r("div",{staticClass:"profile-account"},[r("Profile_account")],1),r("div",{},[r("Profile_code")],1)])],1)},rt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns profile-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("個人檔案")])])])}],at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"account-detail section"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.changeProfile(e)}}},[r("h1",[t._v("我的帳戶")]),t.success?r("div",{staticClass:"field update-success"},[t._m(0)]):t._e(),t.error?r("div",{staticClass:"field update-error"},[t._m(1)]):t._e(),r("div",{staticClass:"field name"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.name,expression:"member_profile.name"}],staticClass:"input",attrs:{type:"text",id:"account__name",placeholder:" "},domProps:{value:t.member_profile.name},on:{focus:t.hideSuccesMessage,input:function(e){e.target.composing||t.$set(t.member_profile,"name",e.target.value)}}}),r("label",{attrs:{for:"account__name"}},[t._v("使用者名稱")])])]),r("div",{staticClass:"field account"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.account,expression:"member_profile.account"}],staticClass:"input",attrs:{type:"text",id:"account__account",placeholder:" "},domProps:{value:t.member_profile.account},on:{focus:t.hideSuccesMessage,input:function(e){e.target.composing||t.$set(t.member_profile,"account",e.target.value)}}}),r("label",{attrs:{for:"account__account"}},[t._v("使用者帳戶")])])]),r("div",{staticClass:"field group"},[r("div",{staticClass:"control input-box select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.group_id,expression:"member_profile.group_id"}],staticClass:"group--select",attrs:{name:"account__group"},on:{focus:t.hideSuccesMessage,change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.member_profile,"group_id",e.target.multiple?r:r[0])}}},t._l(t.groups,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),r("label",{attrs:{for:"account__group"}},[t._v("團體")])])]),r("div",{staticClass:"field rice"},[r("div",{staticClass:"control input-box select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.rice,expression:"member_profile.rice"}],staticClass:"group--select",attrs:{name:"account__group"},on:{focus:t.hideSuccesMessage,change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.member_profile,"rice",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"7"}},[t._v("多飯")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"2"}},[t._v("1/2飯")]),r("option",{attrs:{value:"3"}},[t._v("1/3飯")]),r("option",{attrs:{value:"4"}},[t._v("2/3飯")]),r("option",{attrs:{value:"5"}},[t._v("1/4飯")]),r("option",{attrs:{value:"6"}},[t._v("不飯")])]),r("label",{attrs:{for:"account__name"}},[t._v("飯量")])])]),r("div",{staticClass:"field vegetable"},[r("div",{staticClass:"control input-box select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.vegetable,expression:"member_profile.vegetable"}],staticClass:"group--select",attrs:{name:"account__group"},on:{focus:t.hideSuccesMessage,change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.member_profile,"vegetable",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"2"}},[t._v("多菜")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"3"}},[t._v("少菜")]),r("option",{attrs:{value:"4"}},[t._v("不菜")])]),r("label",{attrs:{for:"account__vegetable"}},[t._v("菜量")])])]),r("div",{staticClass:"field remark"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.member_profile.note,expression:"member_profile.note"}],staticClass:"input",attrs:{type:"text",id:"account__Remark",placeholder:" "},domProps:{value:t.member_profile.note},on:{focus:t.hideSuccesMessage,input:function(e){e.target.composing||t.$set(t.member_profile,"note",e.target.value)}}}),r("label",{attrs:{for:"account__Remark"}},[t._v("備註")])])]),r("div",{staticClass:"field code"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.member_password,expression:"member_password"}],staticClass:"input",class:{empty:t.isEmpty},attrs:{type:"password",placeholder:" "},domProps:{value:t.member_password},on:{blur:t.checkPassword,focus:t.hideAllMessage,input:function(e){e.target.composing||(t.member_password=e.target.value)}}}),r("label",{attrs:{for:"account__code"}},[t._v("\n          密碼\n          "),r("span",[t._v("*")]),t.isEmpty?r("span",[t._v("密碼為必填")]):t._e()])])]),r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.changeProfile},attrs:{disabled:t.loading_status.changeProfile,type:"submit"}},[t._v("\n      儲存變更\n    ")])])])},nt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",[t._v("\n          成功儲存變更\n        ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",[t._v("\n          密碼錯誤\n        ")])])}],st=(a("456d"),{name:"Profile_account",data:function(){return{member_profile:null,member_password:"",isEmpty:!1,success:!1,error:!1,loading_status:{changeProfile:!1}}},created:function(){this.$store.dispatch("retrieveGroups"),this.member_profile=Object.assign({},this.original_profile)},computed:{groups:function(){return this.$store.getters.groups},original_profile:function(){return this.$store.getters.member_profile}},methods:{changeProfile:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.member_password){t.next=4;break}return this.isEmpty=!0,t.abrupt("return");case 4:if(e=this.filterDifferentData(this.original_profile,this.member_profile),Object.keys(e).length){t.next=7;break}return t.abrupt("return");case 7:return e["yourpassword"]=this.member_password,this.success=!1,this.loading_status.changeProfile=!0,t.next=12,this.$store.dispatch("updateMemberProfile",Object.assign({},e));case 12:this.loading_status.changeProfile=!1,this.success=!0,t.next=21;break;case 16:throw t.prev=16,t.t0=t["catch"](0),this.loading_status.changeProfile=!1,"error password"===t.t0&&(this.error=!this.error),new Error(t.t0);case 21:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),hideSuccesMessage:function(){this.success=!1},hideAllMessage:function(){this.success=!1,this.isEmpty=!1,this.error=!1},checkPassword:function(){this.member_password?this.isEmpty=!1:this.isEmpty=!0},filterDifferentData:function(t,e){return Object.keys(t).reduce(function(r,a){return t[a]!==e[a]?(r[a]=e[a],r):r},{})}}}),it=st,ot=(a("ca99"),Object(o["a"])(it,at,nt,!1,null,"049adefc",null)),ut=ot.exports,ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"code-detail section "},[r("form",{on:{submit:function(e){return e.preventDefault(),t.changeCode(e)}}},[r("h1",[t._v("更改密碼")]),t.success?r("div",{staticClass:"field update-success"},[t._m(0)]):t._e(),t.error?r("div",{staticClass:"field update-error"},[t._m(1)]):t._e(),r("div",{staticClass:"field"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],staticClass:"input",class:{empty:t.old_is_empty},attrs:{placeholder:" ",type:"password",id:"account__code"},domProps:{value:t.old_password},on:{focus:t.hideMessage,input:function(e){e.target.composing||(t.old_password=e.target.value)}}}),r("label",{attrs:{for:"account__code"}},[t._v("現有密碼")]),t.old_is_empty?r("span",[t._v("請輸入密碼")]):t._e()])]),r("div",{staticClass:"field"},[r("div",{staticClass:"control input-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password,expression:"new_password"}],staticClass:"input",class:{empty:t.new_is_empty},attrs:{placeholder:" ",type:"password",id:"account__code-check"},domProps:{value:t.new_password},on:{focus:t.hideMessage,input:function(e){e.target.composing||(t.new_password=e.target.value)}}}),r("label",{attrs:{for:"account__code-check"}},[t._v("新密碼")]),t.new_is_empty?r("span",[t._v("請輸入新密碼")]):t._e()])]),r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.changeCode},attrs:{disabled:t.loading_status.changeCode,type:"submit"}},[t._v("\n      更改\n    ")])])])},lt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",[t._v("\n          成功儲存變更\n        ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control"},[r("label",[t._v("\n          所輸入的舊密碼與已保存的密碼不符\n        ")])])}],dt={name:"Profile_code",data:function(){return{old_password:"",new_password:"",success:!1,error:!1,old_is_empty:!1,new_is_empty:!1,loading_status:{changeCode:!1}}},methods:{changeCode:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.detectEmpty()){t.next=3;break}return t.abrupt("return");case 3:return e={yourpassword:this.old_password,password:this.new_password},this.success=!1,this.loading_status.changeCode=!0,t.next=8,this.$store.dispatch("updateMemberProfile",Object.assign({},e));case 8:this.loading_status.changeCode=!1,this.success=!0,this.old_password="",this.new_password="",t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),this.loading_status.changeCode=!1,"error password"===t.t0&&(this.error=!this.error,this.old_password="",this.new_password=""),console.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),hideMessage:function(){this.success=!1,this.error=!1,this.old_is_empty&&(this.old_is_empty=!1),this.new_is_empty&&(this.new_is_empty=!1)},detectEmpty:function(){if(!this.old_password||!this.new_password){if(!this.old_password)return this.old_is_empty=!0,!0;if(!this.new_password)return this.new_is_empty=!0,!0}return!1}}},mt=dt,_t=(a("1cac"),Object(o["a"])(mt,ct,lt,!1,null,"16f326a8",null)),ht=_t.exports,pt={name:"profile",components:{Header:D,Profile_account:ut,Profile_code:ht}},ft=pt,vt=(a("6346"),Object(o["a"])(ft,et,rt,!1,null,null,null)),gt=vt.exports,yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-container "},[r("Header"),r("router-view")],1)},bt=[],wt={name:"order",components:{Header:D}},Ct=wt,kt=Object(o["a"])(Ct,yt,bt,!1,null,null,null),Mt=kt.exports,xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"menu section"},[t._m(0),r("div",{staticClass:"menu__title columns content "},[r("div",{staticClass:"menu-title__date column is-two-fifths"},[r("label",{attrs:{for:"menuDate"}},[t._v("日期")]),r("div",{staticClass:"select "},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.choose_date,expression:"choose_date"}],staticClass:"group--select",attrs:{name:"menuDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.choose_date=e.target.multiple?r:r[0]}}},t._l(t.date_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v("\n            "+t._s(t.date_rang_with_note[a]))])}),0)])]),t.member_order_timeLimit?r("div",{staticClass:"menu-title__deadline column"},[r("label",[t._v("收單時間 ： "+t._s(t.member_order_timeLimit))])]):t._e()]),r("div",{staticClass:"columns menu__detailContainer"},[r("div",{staticClass:"member-menu column"},[t._m(1),t.member_order_menu.length?r("div",{staticClass:"member-menu__list "},t._l(t.member_order_menu,function(e,a){return r("div",{key:a,staticClass:"menu-list__items columns is-mobile",class:{"sold-out":0===e.quantity_limit}},[r("div",{staticClass:"list-item list-item__name column is-4 "},[r("div",{staticClass:"menu-name__title"},[r("span",[t._v(t._s(e.name))]),r("br")]),e.meal_note?r("div",{staticClass:"menu-name__note"},[r("span",[t._v(t._s(e.meal_note))])]):t._e(),Number.isInteger(e.quantity_limit)?r("div",{staticClass:"menu-name__quantityLimit"},[e.quantity_limit?r("span",[t._v("限量 "+t._s(e.quantity_limit)+" 份")]):r("span",[t._v("已售完")])]):t._e()]),r("div",{staticClass:"list-item list-item__price column is-3"},[t._v("\n            "+t._s(e.price)+"\n          ")]),r("div",{staticClass:"list-item list-item__amount column is-5"},[r("font-awesome-icon",{staticClass:"amount__button amount__button--minus",attrs:{icon:"minus-circle",size:"lg"},on:{click:function(r){return t.minusMeal(a,e.id)}}}),r("label",{attrs:{for:"quantity"}},[t._v(t._s(e.amount))]),r("font-awesome-icon",{staticClass:"amount__button amount__button--plus",attrs:{icon:"plus-circle",size:"lg"},on:{click:function(r){return t.addMeal(a,e.id,e.quantity_limit)}}})],1)])}),0):t._e(),r("div",{staticClass:"member-menu__status"},[r("div",{staticClass:"member-menu__status--priceStatistic"},[t._v("\n          金額\n          "),r("span",[t._v(t._s(t.meal_total_price))])]),r("div",{staticClass:"member-menu__status--checkMeal"},[r("button",{staticClass:"button is-link member-menu__next",attrs:{type:"button"},on:{click:t.checkDetail}},[t._v("\n            下一頁\n          ")])])])])])])},Dt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns menu-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("訂餐")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"member-menu__header columns is-mobile"},[r("div",{staticClass:"column is-4 menu-header__name"},[t._v("\n          名稱\n        ")]),r("div",{staticClass:"column is-3 menu-header__price"},[t._v("\n          價格\n        ")]),r("div",{staticClass:"column is-5 menu-header__amount"},[t._v("\n          數量\n        ")])])}],Ot=(a("6c7b"),a("6b54"),{name:"orderMenu",props:["notReload","date"],data:function(){return{choose_date:"",reload_menu:!1}},created:function(){if(this.notReload)return this.choose_date=this.date,void(this.reload_menu=!0);this.choose_date=this.date_range[0]},computed:{date_range:function(){if(this.member_order_timeLimit){var t=Date.compare(Date.today().setTimeToNow(),Date.parse(this.member_order_timeLimit));if(~t)return this.moveDayOfDayRange(this.$store.getters.date_range)}return this.$store.getters.date_range},date_rang_with_note:function(){return this.date_range.map(function(t){return Date.parse(t).toString("MM/dd (ddd)")})},member_order_menu:function(){return this.$store.getters.member_order_menu},member_order_timeLimit:function(){return this.$store.getters.member_order_timeLimit},meal_total_price:function(){return this.member_order_menu.reduce(function(t,e){return t+=e["amount"]*e["price"],t},0)}},watch:{choose_date:function(t){if(this.reload_menu)this.reload_menu=!1;else{var e=this.Date.parse(t).toString("yyyy/MM/dd");this.$store.dispatch("retrieveMemberDailyMenu",{menu_date:e})}}},methods:{addMeal:function(t,e,r){var a=this.member_order_menu[t];if(!(r&&a.amount>=r)){var n={index:t,amount:1};this.$store.dispatch("updateMemberOrderAmount",n)}},minusMeal:function(t,e){if(!(this.member_order_menu[t].amount<=0)){this.member_order_menu[t];var r={index:t,amount:-1};this.$store.dispatch("updateMemberOrderAmount",r)}},checkDetail:function(){var t=this.member_order_menu.every(function(t){return 0===t.amount});t?alert("請新增餐點"):(this.$store.dispatch("generateOrderDetailStatistic"),this.$router.push({name:"order_check",params:{choose_date:this.choose_date}}))},moveDayOfDayRange:function(t){var e=new Array(7).fill(0);return e.map(function(t,e){var r=Date.today().add(e+2).day();return r.toString("MM/dd")}).filter(function(t){return Date.parse(t).is().weekday()})}}}),St=Ot,$t=(a("6f0e"),Object(o["a"])(St,xt,Dt,!1,null,"7ebd0e86",null)),Tt=$t.exports,Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"check section"},[t._l(t.member_order_check,function(e,a){return r("div",{key:a,staticClass:"meal__container columns "},[r("div",{staticClass:"meal-title column is-full"},[r("h1",{staticClass:"subtitle"},[t._v(t._s(e.name))]),r("div",{staticClass:"columns meal-option"},[e.user_rice?r("div",{staticClass:"meal-rice column"},[r("div",{staticClass:"select input-box"},[r("select",{domProps:{value:e.user_rice},on:{change:function(e){return t.updateDetail(e,a,"user_rice")}}},[r("option",{attrs:{value:"7"}},[t._v("多飯")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"2"}},[t._v("1/2飯")]),r("option",{attrs:{value:"3"}},[t._v("1/3飯")]),r("option",{attrs:{value:"4"}},[t._v("2/3飯")]),r("option",{attrs:{value:"5"}},[t._v("1/4飯")]),r("option",{attrs:{value:"6"}},[t._v("不飯")])]),r("label",[t._v("飯量")])])]):t._e(),e.user_vegetable?r("div",{staticClass:"meal-vegetable  column"},[r("div",{staticClass:"select input-box"},[r("select",{domProps:{value:e.user_vegetable},on:{change:function(e){return t.updateDetail(e,a,"user_vegetable")}}},[r("option",{attrs:{value:"2"}},[t._v("多菜")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"3"}},[t._v("少菜")]),r("option",{attrs:{value:"4"}},[t._v("不菜")])]),r("label",[t._v("菜量")])])]):t._e(),e.flavors.length?r("div",{staticClass:"meal-flavors column"},[r("div",{staticClass:"select input-box"},[r("select",{domProps:{value:e.flavor_id},on:{change:function(e){return t.updateDetail(e,a,"flavor_id")}}},t._l(e.flavors,function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.choice))])}),0),r("label",[t._v("口味")])])]):t._e(),r("div",{staticClass:"meal-note column "},[r("div",{staticClass:"input-box"},[r("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.note},on:{input:function(e){return t.updateDetail(e,a,"note")}}}),r("label",[t._v("備註")])])])])])])}),r("div",{staticClass:"button__container columns"},[r("router-link",{staticClass:"button is-light is-medium",attrs:{disabled:t.loading_status.addMemberOrder,to:{name:"order_menu",params:{notReload:!0,date:t.choose_date}}}},[t._v("\n      上一頁\n    ")]),r("button",{staticClass:"button is-info is-medium",class:{"is-loading":t.loading_status.addMemberOrder},attrs:{type:"button",disabled:t.loading_status.addMemberOrder},on:{click:t.addMemberOrder}},[t._v("\n      送出\n    ")])],1)],2)},Et=[],Nt={name:"order_check",props:["choose_date"],data:function(){return{over_time:!1,loading_status:{addMemberOrder:!1}}},computed:{member_order_check:function(){return this.$store.getters.member_order_check}},methods:{updateDetail:function(t,e,r){var a=t.target.value;this.$store.dispatch("updateOrderDetailStatistic",{index:e,name:r,value:a})},filterNotToNeedPostValue:function(){return this.member_order_check.map(function(t){var e={menu_id:t.menu_id,quantity:t.quantity};return t.flavor_id&&(e["flavor_id"]=t.flavor_id),t.user_rice&&(e["user_rice"]=t.user_rice),t.user_vegetable&&(e["user_vegetable"]=t.user_vegetable),t.note&&(e["note"]=t.note),e})},checkQuantityLimite:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.reduce(function(t,e){return t[e.menu_id]?t[e.menu_id]+=1:t[e.menu_id]=1,t},{}),a=this.Date.parse(this.choose_date).toString("yyyy/MM/dd"),t.next=4,this.$store.dispatch("retrieveMemberDailyMenu",{menu_date:a}).then(function(t){return t.filter(function(t){return t.quantity_limit})});case 4:return n=t.sent,t.abrupt("return",n.some(function(t){return!!r[t.id]&&r[t.id]>t.quantity_limit}));case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),addMemberOrder:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading_status.addMemberOrder=!0,e=this.filterNotToNeedPostValue(),t.next=5,this.checkQuantityLimite(e);case 5:if(r=t.sent,!r){t.next=10;break}return alert("限量商品低於下單數量，請重新下單喔~"),this.$router.push({name:"order_menu"}),t.abrupt("return");case 10:return t.next=12,this.$store.dispatch("addMemberOrder",{menuArray:e});case 12:this.loading_status.addMemberOrder=!1,this.$router.push({name:"purchase",params:{order_date:this.choose_date}}),t.next=22;break;case 16:t.prev=16,t.t0=t["catch"](0),console.error(t.t0),this.loading_status.addMemberOrder=!1,"over order time"===t.t0&&(alert("超過時間囉~"),this.$router.push({name:"order_menu"})),t.t0.includes("remain")&&(alert("限量商品低於下單數量，請重新下單喔~"),this.$router.push({name:"order_menu"}));case 22:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}()}},jt=Nt,Rt=(a("9d1a"),Object(o["a"])(jt,Pt,Et,!1,null,"627d01be",null)),At=Rt.exports,Ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"purchase-container "},[r("Header"),r("Purchase_list",{attrs:{order_date:t.order_date}})],1)},Gt=[],zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"purchase section"},[t._m(0),r("div",{staticClass:"purchase__title columns content "},[r("div",{staticClass:"purchase-title__date column "},[r("label",{attrs:{for:"purchaseDate"}},[t._v("日期")]),r("div",{staticClass:"select "},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.choose_date,expression:"choose_date"}],staticClass:"group--select",attrs:{name:"purchaseDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.choose_date=e.target.multiple?r:r[0]}}},t._l(t.date_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(t._s(t.date_rang_with_note[a]))])}),0)])])]),r("div",{staticClass:"columns purchase__detailContainer"},[r("div",{staticClass:"member-purchase column"},[t._m(1),t.purchase_list.length?r("div",{staticClass:"member-purchase__list "},[t._l(t.purchase_list,function(e,a){return[t.modify!==a?r("div",{key:a,staticClass:"purchase-list__item purchase-list__show columns "},[r("div",{staticClass:"list-item list-item__status column"},[r("button",{staticClass:"button is-danger",class:{"is-loading":t.loading_status.deletePurchaseMeal===a},attrs:{disabled:t.loading_status.deletePurchaseMeal===a},on:{click:function(r){return t.deletePurchaseMeal(e,a)}}},[t._v("\n                刪除\n              ")]),r("button",{staticClass:"button is-info",attrs:{disabled:t.loading_status.deletePurchaseMeal===a},on:{click:function(r){return t.modifyPurchaseMeal(e,a)}}},[t._v("\n                修改\n              ")])]),r("div",{staticClass:"list-item list-item__name column "},[r("span",[t._v("\n                "+t._s(e.menu_name)+"\n              ")])]),r("div",{staticClass:"list-item list-item__amount column"},[t._v("\n              "+t._s(e.quantity)+"\n            ")]),r("div",{staticClass:"list-item list-item__rice column"},[t._v("\n              "+t._s(t.converRice(e.user_rice))+"\n            ")]),r("div",{staticClass:"list-item list-item__vegetable column"},[t._v("\n              "+t._s(t.converVegetable(e.user_vegetable))+"\n            ")]),r("div",{staticClass:"column list-item list-item__flavor"},[t._v("\n              "+t._s(e.flavor_choice)+"\n            ")]),r("div",{staticClass:"column list-item list-item__note"},[t._v("\n              "+t._s(e.note)+"\n            ")])]):r("div",{key:a,staticClass:"purchase-list__item purchase-list__modify columns "},[r("div",{staticClass:"list-item list-item__status column"},[r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.updatePurchaseMeal===a},attrs:{disabled:t.loading_status.updatePurchaseMeal===a},on:{click:function(r){return t.updatePurchaseMeal(e,a)}}},[t._v("\n                送出\n              ")]),r("button",{staticClass:"button is-light",attrs:{disabled:t.loading_status.updatePurchaseMeal===a},on:{click:function(r){return t.modifyPurchaseMeal(e)}}},[t._v("\n                取消\n              ")])]),r("div",{staticClass:"list-item list-item__name column "},[r("span",[t._v("\n                "+t._s(e.menu_name)+"\n              ")])]),r("div",{staticClass:"list-item list-item__amount column"},[t._v("\n              "+t._s(e.quantity)+"\n            ")]),r("div",{staticClass:"list-item list-item__rice column"},[t.change_meal.user_rice?r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.change_meal.user_rice,expression:"change_meal.user_rice",modifiers:{number:!0}}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.change_meal,"user_rice",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"7"}},[t._v("多飯")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"2"}},[t._v("1/2飯")]),r("option",{attrs:{value:"3"}},[t._v("1/3飯")]),r("option",{attrs:{value:"4"}},[t._v("2/3飯")]),r("option",{attrs:{value:"5"}},[t._v("1/4飯")]),r("option",{attrs:{value:"6"}},[t._v("不飯")])])]):t._e()]),r("div",{staticClass:"list-item list-item__vegetable column"},[t.change_meal.user_vegetable?r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.change_meal.user_vegetable,expression:"change_meal.user_vegetable",modifiers:{number:!0}}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.change_meal,"user_vegetable",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"2"}},[t._v("多菜")]),r("option",{attrs:{value:"1"}},[t._v("正常")]),r("option",{attrs:{value:"3"}},[t._v("少菜")]),r("option",{attrs:{value:"4"}},[t._v("不菜")])])]):t._e()]),r("div",{staticClass:"column list-item list-item__flavor"},[t.change_meal.flavor_id?r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.change_meal.flavor_id,expression:"change_meal.flavor_id",modifiers:{number:!0}}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.change_meal,"flavor_id",e.target.multiple?r:r[0])}}},t._l(t.menu_flavors,function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.choice))])}),0)]):t._e()]),r("div",{staticClass:"column list-item list-item__note "},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.change_meal.note,expression:"change_meal.note",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.change_meal.note},on:{input:function(e){e.target.composing||t.$set(t.change_meal,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])]})],2):t._e()])])])},Lt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns purchase-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("訂單資訊")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"member-purchase__header columns"},[r("div",{staticClass:"column purchase-header purchase-header__status"}),r("div",{staticClass:"column purchase-header purchase-header__name"},[t._v("\n          名稱\n        ")]),r("div",{staticClass:"column purchase-header purchase-header__amount"},[t._v("\n          數量\n        ")]),r("div",{staticClass:"column purchase-header purchase-header__rice"},[t._v("\n          飯量\n        ")]),r("div",{staticClass:"column purchase-header purchase-header__vegetable"},[t._v("\n          菜量\n        ")]),r("div",{staticClass:"column purchase-header purchase-header__flavor"},[t._v("\n          口味\n        ")]),r("div",{staticClass:"column purchase-header purchase-header__note"},[t._v("\n          備註\n        ")])])}],Ft={name:"purchase_list",props:["order_date"],data:function(){return{loading_status:{updatePurchaseMeal:null,deletePurchaseMeal:null},choose_date:"",modify:null,menu_flavors:null,change_meal:{user_rice:null,user_vegetable:null,flavor_id:null,note:null}}},created:function(){this.order_date?this.choose_date=this.order_date:(this.choose_date=this.date_range[0],this.$store.dispatch("retrieveGroups"))},computed:{date_range:function(){if(this.member_order_timeLimit){var t=Date.compare(Date.today().setTimeToNow(),Date.parse(this.member_order_timeLimit));if(~t)return this.moveDayOfDayRange(this.$store.getters.date_range)}return this.$store.getters.date_range},date_rang_with_note:function(){return this.date_range.map(function(t){return Date.parse(t).toString("MM/dd (ddd)")})},purchase_list:function(){return this.$store.getters.purchase_list},member_menu:function(){return this.$store.getters.member_menu}},watch:{choose_date:function(t){var e=this.Date.parse(t).toString("yyyy/MM/dd");this.getPurchaseList(t),this.$store.dispatch("retrieveMemberDailyMenu",{menu_date:e})}},methods:{converRice:function(t){var e;switch(t){case 1:e="正常";break;case 2:e="1/2飯";break;case 3:e="1/3飯";break;case 4:e="2/3飯";break;case 5:e="1/4飯";break;case 6:e="不飯";break;case 7:e="多飯";break;default:e="無"}return e},converVegetable:function(t){var e;switch(t){case 1:e="正常";break;case 2:e="多菜";break;case 3:e="少菜";break;case 4:e="不菜";break;default:e="無"}return e},modifyPurchaseMeal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.modify=e,this.clearObjectValue(this.change_meal),this.menu_flavors=null,null!==e){var r=this.member_menu.filter(function(e){return e.id===t.menu_id})[0];if(this.change_meal.user_rice=t.user_rice,this.change_meal.user_vegetable=t.user_vegetable,this.change_meal.note=t.note,t.flavor_choice){var a=t.flavor_choice,n=r.flavors.filter(function(t){return t.choice===a})[0].id;this.menu_flavors=r.flavors,this.change_meal.flavor_id=n}}},updatePurchaseMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=this.filterBeModifiedProperty(this.change_meal,e),n=0===Object.keys(a).length,!n){t.next=6;break}return this.modifyPurchaseMeal(),t.abrupt("return");case 6:return this.loading_status.updatePurchaseMeal=r,t.next=9,this.$store.dispatch("updateMemberOrder",{order_id:e.id,change_meal:a});case 9:return this.modifyPurchaseMeal(),t.next=12,this.getPurchaseList(this.choose_date);case 12:this.loading_status.updatePurchaseMeal=null,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),this.loading_status.updatePurchaseMeal=null,console.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[0,15]])}));function e(e,r){return t.apply(this,arguments)}return e}(),deletePurchaseMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,t.prev=1,this.loading_status.deletePurchaseMeal=r,t.next=5,this.$store.dispatch("deletePurchaseMeal",a);case 5:return t.next=7,this.getPurchaseList(this.choose_date);case 7:this.loading_status.deletePurchaseMeal=null,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),this.loading_status.deletePurchaseMeal=null,console.error(t.t0);case 14:case"end":return t.stop()}},t,this,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),getPurchaseList:function(t){var e=this.Date.parse(t).toString("yyyy/MM/dd");return this.$store.dispatch("retrievePurchaseList",{start_date:e,end_date:e})},filterBeModifiedProperty:function(t,e){var r={};for(var a in t)e[a]||(e[a]=null),t[a]!==e[a]&&(r[a]=t[a]);return r},clearObjectValue:function(t){for(var e in t)t[e]=null},moveDayOfDayRange:function(t){var e=new Array(7).fill(0);return e.map(function(t,e){var r=Date.today().add(e+2).day();return r.toString("MM/dd")}).filter(function(t){return Date.parse(t).is().weekday()})}}},qt=Ft,It=(a("3b45"),Object(o["a"])(qt,zt,Lt,!1,null,"c57fd3f4",null)),Ut=It.exports,Wt={name:"purchase",props:["order_date"],components:{Header:D,Purchase_list:Ut}},Bt=Wt,Yt=Object(o["a"])(Bt,Ht,Gt,!1,null,null,null),Jt=Yt.exports,Vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"history"},[r("Header"),"member"===t.loggedIn?[r("History_user")]:"boss"===t.loggedIn?[r("History_admin")]:t._e()],2)},Zt=[],Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"section"},[t._m(0),r("div",{staticClass:"columns  member-history__status"},[r("div",{staticClass:"column is-one-third status status__date"},[r("h1",{staticClass:"title is-3"},[t._v("日期")]),r("div",{staticClass:"select"},[t.week_range?r("select",{directives:[{name:"model",rawName:"v-model",value:t.choose_date,expression:"choose_date"}],staticClass:"group--select",attrs:{name:"historyDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.choose_date=e.target.multiple?r:r[0]}}},t._l(t.week_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}),0):t._e()])]),r("div",{staticClass:"column is-half status status__totalPrice",class:{"status__totalPrice--Paid":t.member_history_list.payment_status}},[r("h1",{staticClass:"title is-3"},[t._v("總金額")]),r("span",{staticClass:"title is-3"},[t._v(t._s(t.member_history_list.total_price))])])]),t._m(1),t.member_history_list.list?r("div",{staticClass:"member-history__list"},t._l(t.member_history_list.list,function(e){return r("div",{key:e.id,staticClass:"list-meal__container columns"},[r("div",{staticClass:"list-meal list-meal__date column"},[t._v(t._s(e.menu_date))]),r("div",{staticClass:"list-meal list-meal__name column"},[t._v(t._s(e.menu_name))]),r("div",{staticClass:"list-meal list-meal__detail column"},[r("div",{staticClass:"detail-container"},[e.user_rice?r("span",[t._v(t._s(t.converRice(e.user_rice))+"，")]):t._e(),e.user_vegetable?r("span",[t._v(t._s(t.converVegetable(e.user_vegetable))+"，")]):t._e(),e.flavor_choice?r("span",[t._v(t._s(e.flavor_choice)+"，")]):t._e(),r("span",[t._v(t._s(e.note))])])]),r("div",{staticClass:"list-meal list-meal__price column"},[t._v("\n        "+t._s(e.menu_price)+"\n      ")])])}),0):t._e()])},Qt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns history-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("歷史訂單")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"member-history__header columns"},[r("div",{staticClass:"column history-header history-header__date"},[t._v("\n      日期\n    ")]),r("div",{staticClass:"column history-header history-header__name"},[t._v("\n      名稱\n    ")]),r("div",{staticClass:"column history-header history-header__detail"},[t._v("\n      詳細資訊\n    ")]),r("div",{staticClass:"column history-header history-header__price"},[t._v("\n      價格\n    ")])])}],Xt=(a("28a5"),a("768b")),te={name:"history_table",data:function(){return{choose_date:""}},created:function(){var t=this.week_range.length-1;this.choose_date=this.week_range[t]},computed:{week_range:function(){return this.$store.getters.week_range},member_history_list:function(){return this.$store.getters.member_history_list}},watch:{choose_date:function(t){var e=this,r=t.split("~").map(function(t){return e.Date.parse(t).toString("yyyy/MM/dd")}),a=Object(Xt["a"])(r,2),n=a[0],s=a[1];this.$store.dispatch("retrieveMemberHistoryList",{start_date:n,end_date:s})}},methods:{converRice:function(t){var e;switch(t){case 1:e="正常飯";break;case 2:e="1/2飯";break;case 3:e="1/3飯";break;case 4:e="2/3飯";break;case 5:e="1/4飯";break;case 6:e="不飯";break;case 7:e="多飯";break;default:e="無"}return e},converVegetable:function(t){var e;switch(t){case 1:e="正常菜";break;case 2:e="多菜";break;case 3:e="少菜";break;case 4:e="不菜";break;default:e="無"}return e}}},ee=te,re=(a("f5d8"),Object(o["a"])(ee,Kt,Qt,!1,null,"c30b922a",null)),ae=re.exports,ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"history-boss  section"},[r("div",{staticClass:"history-boss__header"},[t._m(0),r("div",{staticClass:"columns boss-header__date"},[r("div",{staticClass:"column date__container"},[r("h1",{staticClass:"title is-3"},[t._v("日期")]),r("div",{staticClass:"select"},[t.week_range?r("select",{directives:[{name:"model",rawName:"v-model",value:t.choose_date,expression:"choose_date"}],staticClass:"group--select",attrs:{name:"historyDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.choose_date=e.target.multiple?r:r[0]}}},t._l(t.week_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}),0):t._e()])])]),t.price_statistic?r("div",{staticClass:"columns allGroupStatus"},[t._m(1),r("div",{staticClass:"column is-6 allGroupStatus-income"},[r("h1",{staticClass:"title is-1 allGroupStatus-income__title"},[t._v("\n          "+t._s(t.price_statistic.total_price||0)+"\n        ")]),t._m(2)]),r("div",{staticClass:"column is-3 allGroupStatus-paidStatus"},[r("div",{staticClass:"paidStatus allGroupStatus-paidStatus__paid"},[r("span",[t._v("已收："+t._s(t.price_statistic.paid||0)+"元")])]),r("div",{staticClass:"paidStatus allGroupStatus-paidStatus__unpaid"},[r("span",[t._v(" 未收："+t._s(t.price_statistic.unpaid||0)+" 元 ")])])])]):t._e()]),t._l(t.groups_statistic,function(e,a){return[r("Group_statistic",{key:a,attrs:{count_statistic:e,group_name:a,start_date:t.start_date,end_date:t.end_date}})]})],2)},se=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns boss-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("歷史統計")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"column is-3 allGroupStatus-title"},[r("h2",{staticClass:"title is-4"},[t._v("全體收益")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"subtitle allGroupStatus-income__unit"},[r("span",[t._v("收益")]),r("span",[t._v("元")])])}],ie=(a("5df3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"group"},[r("div",{staticClass:"columns group__header"},[r("div",{staticClass:"column is-3  group-name"},[r("h1",{staticClass:"title is-3 "},[t._v(t._s(t.group_name))])]),r("div",{staticClass:"column is-6 group-income"},[r("h1",{staticClass:"title is-1 group-income__title"},[t._v("\n        "+t._s(t.count_statistic.statistic.total_price||0)+"\n      ")]),t._m(0)]),r("div",{staticClass:"column is-3 group-paymentStatus"},[r("div",{staticClass:"paidStatus group-paymentStatus__paid"},[r("span",[t._v(" 已收："+t._s(t.count_statistic.statistic.paid||0)+"元 ")])]),r("div",{staticClass:"paidStatus group-paymentStatus__unpaid"},[r("span",[t._v(" 未收："+t._s(t.count_statistic.statistic.unpaid||0)+" 元 ")])])])]),t.count_statistic.list?r("div",{staticClass:"group__memberList columns is-multiline"},t._l(t.count_statistic.list,function(e,a){return r("div",{key:a,staticClass:"column is-4 member",class:{isPaying:t.paying_status[a]},on:{click:function(r){return t.changePaidStatus(a,e.user_id)}}},[r("div",{staticClass:"member__name"},[t._v("使用者："+t._s(e.name))]),r("div",{staticClass:"member__owe"},[t._v("\n        金額：\n        "),r("span",[t._v("\n          "+t._s(e.person_paid)+"\n        ")])]),r("div",{staticClass:"member__paymentStatus"},[e.payment_status?r("div",{staticClass:"paymentStatus paymentStatus--paid"},[t._v("\n          已付款\n        ")]):r("div",{staticClass:"paymentStatus paymentStatus--unpaid"},[t._v("\n          未付款\n        ")])])])}),0):t._e()])}),oe=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"subtitle group-income__unit"},[r("span",[t._v("收益")]),r("span",[t._v("元")])])}],ue={name:"group__statistic",props:["count_statistic","group_name","start_date","end_date"],data:function(){return{paying_status:[]}},created:function(){var t=this.count_statistic.list.length;this.paying_status=new Array(t).fill(0)},methods:{changePaidStatus:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Date.today().between(this.Date.parse(this.start_date),this.Date.parse(this.end_date)),!a){t.next=5;break}return alert("當週還不能付款喔"),t.abrupt("return");case 5:return this.$set(this.paying_status,e,!0),this.$store.commit("updateMemberPaidStatus",{group_name:this.group_name,index:e}),t.next=9,this.$store.dispatch("updateMemberPaidStatus",{start_date:this.start_date,end_date:this.end_date,member_id:[r]});case 9:this.$set(this.paying_status,e,!1),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e,r){return t.apply(this,arguments)}return e}()}},ce=ue,le=(a("2971"),Object(o["a"])(ce,ie,oe,!1,null,"7fb8d55b",null)),de=le.exports,me={name:"history_admin",components:{Group_statistic:de},data:function(){return{choose_date:""}},created:function(){var t=this.week_range.length-1;this.choose_date=this.week_range[t],this.groups||this.$store.dispatch("retrieveGroups")},computed:{week_range:function(){return this.$store.getters.week_range},groups:function(){return this.$store.getters.groups},price_statistic:function(){return this.$store.getters.boss_history_statistic_all.statistic},groups_statistic:function(){return this.$store.getters.boss_history_statistic_groups},start_date:function(){var t=this;return this.choose_date.split("~").map(function(e){return t.Date.parse(e).toString("yyyy/MM/dd")})[0]},end_date:function(){var t=this;return this.choose_date.split("~").map(function(e){return t.Date.parse(e).toString("yyyy/MM/dd")})[1]}},watch:{choose_date:function(t){var e={start_date:this.start_date,end_date:this.end_date};this.retrieveHistoryStatisticWithAll(e),this.retrieveHistoryStatisticWithGroup(e)}},methods:{retrieveHistoryStatisticWithAll:function(t){return this.$store.dispatch("retrieveBossHistoryStatisticAll",t).catch(function(t){console.error(t)})},retrieveHistoryStatisticWithGroup:function(t){var e=this,r=t.start_date,a=t.end_date;return Promise.all(this.groups.map(function(t){var n={start_date:r,end_date:a,group_id:t.id,group_name:t.name};return e.$store.dispatch("retrieveBossHistoryStatisticWithGroup",n).catch(function(t){console.error(t)})}))}}},_e=me,he=(a("d51c"),Object(o["a"])(_e,ne,se,!1,null,"5caf171c",null)),pe=he.exports,fe={name:"history",components:{Header:D,History_user:ae,History_admin:pe},computed:{loggedIn:function(){return this.$store.getters.loggedIn}}},ve=fe,ge=Object(o["a"])(ve,Vt,Zt,!1,null,"eec57832",null),ye=ge.exports,be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"statistic"},[r("Header"),r("Statistic_admin")],1)},we=[],Ce=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"statistic-boss section"},[r("div",{staticClass:"menu-statistic__header"},[t._m(0),r("div",{staticClass:"columns  statistic-header__status"},[r("div",{staticClass:"column  status status__date"},[r("h1",{staticClass:"title is-3"},[t._v("日期")]),r("div",{staticClass:"select"},[t.date_range?r("select",{directives:[{name:"model",rawName:"v-model",value:t.status_choose.date,expression:"status_choose.date"}],staticClass:"group--select",attrs:{name:"historyDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.status_choose,"date",e.target.multiple?r:r[0])}}},t._l(t.date_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(t._s(t.date_rang_with_note[a]))])}),0):t._e()])]),r("div",{staticClass:"column  status status__group"},[r("h1",{staticClass:"title is-3"},[t._v("團體")]),r("div",{staticClass:"select"},[t.groups?r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.status_choose.group,expression:"status_choose.group",modifiers:{number:!0}}],staticClass:"group--select",attrs:{name:"historyDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.status_choose,"group",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"all"}},[t._v("全體")]),t._l(t.groups,function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2):t._e()])])])]),t.specialDay?r("div",{staticClass:"specialDay"},[r("h1",{staticClass:"title is-1"},[t._v("紫米飯日")])]):t._e(),t.menu_statistic.statistic?r("div",{staticClass:"menu-statistic__meal"},[t._m(1),t._l(t.menu_statistic.statistic,function(e,a){return r("div",{key:a,staticClass:"statistic-meal__list columns"},[r("div",{staticClass:"column is-4 meal-list meal-list__name"},[t._v("\n        "+t._s(e.menu_name)+"\n      ")]),r("div",{staticClass:"column is-4 meal-list meal-list__amount"},[t._v("\n        "+t._s(e.total_amount)+"\n      ")]),r("div",{staticClass:"column is-4 meal-list meal-list__price"},[t._v("\n        "+t._s(e.total_price)+"\n      ")])])})],2):t._e(),r("div",{staticClass:"menu-statistic__rice columns"},[t._m(2),r("div",{staticClass:"column statistic-rice statistic-rice__amount"},[r("span",[t._v(t._s(t.menu_statistic.total_rice))])])]),t.menu_statistic.list?r("div",{staticClass:"menu-statistic__receipt"},[t._m(3),t._l(t.menu_statistic.list,function(e,a){return r("div",{key:a,staticClass:"columns statistic-receipt statistic-receipt__byMember"},[r("div",{staticClass:"column receipt-member receipt-member__name"},[t._v("\n        "+t._s(e.name)+"\n      ")]),r("div",{staticClass:"column receipt-member receipt-member__meal"},[t._v("\n        "+t._s(e.menu_name)+"\n      ")]),r("div",{staticClass:"column receipt-member receipt-member__rice"},[t._v("\n        "+t._s(t.convertRice(e.user_rice))+"\n      ")]),r("div",{staticClass:"column receipt-member receipt-member__vegetable"},[t._v("\n        "+t._s(t.convertVegetable(e.user_vegetable))+"\n      ")]),r("div",{staticClass:"column receipt-member receipt-member__note"},[t._v("\n        "+t._s(e.note)+"\n      ")])])})],2):t._e()])},ke=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns statistic-header__title"},[r("div",{staticClass:"column"},[r("h1",{staticClass:" title is-2 "},[t._v("訂單")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"statistic-meal__header columns"},[r("div",{staticClass:"column is-4 meal-header meal-header__name"},[t._v("\n        名稱\n      ")]),r("div",{staticClass:"column is-4 meal-header meal-header__amount"},[t._v("\n        總數量\n      ")]),r("div",{staticClass:"column is-4 meal-header meal-header__price"},[t._v("\n        總價\n      ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"column is-2 statistic-rice statistic-rice__title"},[r("span",[t._v("飯量：")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns statistic-receipt statistic-receipt__title"},[r("span",{staticClass:"column title is-3"},[t._v("明細：")])])}],Me=(a("c5f6"),a("7cdf"),{name:"statistic_admin",data:function(){return{status_choose:{date:"",group:"all"},specialDay:!1}},created:function(){this.isSpecialDay("wednesday")&&(this.specialDay=!0),this.status_choose.date=this.date_range[0],this.$store.dispatch("retrieveGroups")},computed:{date_range:function(){return this.$store.getters.date_range},date_rang_with_note:function(){return this.date_range.map(function(t){return Date.parse(t).toString("MM/dd (ddd)")})},groups:function(){return this.$store.getters.groups},menu_statistic:function(){return!!this.$store.getters.boss_menu_statistic&&this.$store.getters.boss_menu_statistic}},watch:{status_choose:{handler:function(t){var e=t.date,r=t.group;e=this.Date.parse(e).toString("yyyy/MM/dd");var a={date:e};Number.isInteger(r)&&(a["group_id"]=r),this.$store.dispatch("retrieveBossMenuStatistic",a).then(function(t){t.list.length}).catch(function(t){console.error(t)})},deep:!0}},methods:{convertRice:function(t){var e;switch(t){case 1:e="正常飯";break;case 2:e="1/2 飯";break;case 3:e="1/3 飯";break;case 4:e="2/3 飯";break;case 5:e="1/4 飯";break;case 6:e="不飯";break;case 7:e="多飯";break;default:e="無"}return e},convertVegetable:function(t){var e;switch(t){case 1:e="正常菜";break;case 2:e="多菜";break;case 3:e="少菜";break;case 4:e="不菜";break;default:e="無"}return e},isSpecialDay:function(t){switch(t){case"monday":return Date.today().is().monday();case"tuesday":return Date.today().is().tuesday();case"wednesday":return Date.today().is().wednesday();case"thursday":return Date.today().is().thursday();case"friday":return Date.today().is().friday();case"saturday":return Date.today().is().saturday();case"sunday":return Date.today().is().sunday();default:return"not match"}}}}),xe=Me,De=(a("7c69"),Object(o["a"])(xe,Ce,ke,!1,null,"022aed5e",null)),Oe=De.exports,Se={name:"statistic",components:{Header:D,Statistic_admin:Oe}},$e=Se,Te=Object(o["a"])($e,be,we,!1,null,"86fad346",null),Pe=Te.exports,Ee=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"menu"},[r("Header"),r("section",{staticClass:"menu-date section"},[r("label",{attrs:{for:"orderDate"}},[t._v("日期")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.choose_date,expression:"choose_date"}],staticClass:"group--select",attrs:{name:"orderDate"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.choose_date=e.target.multiple?r:r[0]}}},t._l(t.date_range,function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(t._s(t.date_rang_with_note[a]))])}),0)])]),r("Addmenu",{attrs:{choose_date:t.choose_date}}),r("Menu_ListTable",{attrs:{choose_date:t.choose_date}})],1)},Ne=[],je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"addmenu section"},[r("h1",{staticClass:"title"},[t._v("\n    主餐\n    "),r("font-awesome-icon",{staticClass:"addrow",attrs:{icon:"plus-circle",size:"xs"},on:{click:function(e){return t.addRow("main_meals")}}})],1),r("table",{staticClass:"main-meals table is-bordered"},[t._m(0),r("tbody",t._l(t.main_meals,function(e,a){return r("tr",{key:a},[r("td",{staticClass:"main-meals__name",attrs:{"data-label":"名稱"}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"meal.name",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"main-meals__price",attrs:{"data-label":"價格"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"meal.price",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"tel"},domProps:{value:e.price},on:{input:function(r){r.target.composing||t.$set(e,"price",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"main-meals__limited",attrs:{"data-label":"限量(份數)"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity_limit,expression:"meal.quantity_limit",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"tel"},domProps:{value:e.quantity_limit},on:{input:function(r){r.target.composing||t.$set(e,"quantity_limit",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"main-meals__group",attrs:{"data-label":"團體"}},[r("div",{staticClass:"select"},[t.groups?r("select",{directives:[{name:"model",rawName:"v-model",value:e.group_id,expression:"meal.group_id"}],staticClass:"group--select",on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"group_id",r.target.multiple?a:a[0])}}},[r("option",{attrs:{value:"null"}},[t._v("全體")]),t._l(t.groups,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2):t._e()])]),r("td",{staticClass:"main-meals__flavor flavors-list",attrs:{"data-label":"口味"}},[r("div",{staticClass:"main-meals__flavor--add flavors-list--add"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.flavor,expression:"meal.flavor",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.flavor},on:{keypress:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.addFlavor(e)},input:function(r){r.target.composing||t.$set(e,"flavor",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("button",{staticClass:"button is-light",on:{click:function(r){return t.addFlavor(e)}}},[t._v("\n              新增\n            ")])]),e.flavor_group.length?r("div",{staticClass:"main-meals__flavor--show flavors-list--show"},t._l(e.flavor_group,function(a,n){return r("div",{key:n,staticClass:"flavor--item"},[r("font-awesome-icon",{attrs:{icon:"times",size:"lg"},on:{click:function(r){return t.deleteFlavor(e,n)}}}),r("label",[t._v(t._s(a.choice))])],1)}),0):t._e()]),r("td",{staticClass:"main-meals__note",attrs:{"data-label":"備註"}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.note,expression:"meal.note",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.note},on:{input:function(r){r.target.composing||t.$set(e,"note",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"main-meals__delete"},[r("font-awesome-icon",{staticClass:"minusrow",attrs:{icon:"trash-alt",size:"lg"},on:{click:function(e){return t.minusRow("main_meals",a)}}})],1)])}),0)]),r("h1",{staticClass:"title"},[t._v("\n    加點\n    "),r("span",{staticClass:"subtitle"},[t._v("(不可選飯菜)")]),r("font-awesome-icon",{staticClass:"addrow",attrs:{icon:"plus-circle",size:"xs"},on:{click:function(e){return t.addRow("snacks")}}})],1),r("table",{staticClass:"snacks table is-bordered"},[t._m(1),r("tbody",t._l(t.snacks,function(e,a){return r("tr",{key:a},[r("td",{staticClass:"snack__name",attrs:{"data-label":"名稱"}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"snack.name",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"snack__price",attrs:{"data-label":"價格"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"snack.price",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"tel"},domProps:{value:e.price},on:{input:function(r){r.target.composing||t.$set(e,"price",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"snack__limited",attrs:{"data-label":"限量(份數)"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity_limit,expression:"snack.quantity_limit",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"tel"},domProps:{value:e.quantity_limit},on:{input:function(r){r.target.composing||t.$set(e,"quantity_limit",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"snack__group",attrs:{"data-label":"團體"}},[r("div",{staticClass:"select"},[t.groups?r("select",{directives:[{name:"model",rawName:"v-model",value:e.group_id,expression:"snack.group_id"}],staticClass:"group--select",on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"group_id",r.target.multiple?a:a[0])}}},[r("option",{attrs:{value:"null"}},[t._v("全體")]),t._l(t.groups,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2):t._e()])]),r("td",{staticClass:"flavors-list snack__flavor",attrs:{"data-label":"口味"}},[r("div",{staticClass:"snack__flavor--add flavors-list--add"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.flavor,expression:"snack.flavor",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.flavor},on:{keypress:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.addFlavor(e)},input:function(r){r.target.composing||t.$set(e,"flavor",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("button",{staticClass:"button is-light",on:{click:function(r){return t.addFlavor(e)}}},[t._v("\n              新增\n            ")])]),e.flavor_group.length?r("div",{staticClass:"snack__flavor--show flavors-list--show"},t._l(e.flavor_group,function(a,n){return r("div",{key:n,staticClass:"flavor--item"},[r("font-awesome-icon",{attrs:{icon:"times",size:"lg"},on:{click:function(r){return t.deleteFlavor(e,n)}}}),r("label",[t._v(t._s(a.choice))])],1)}),0):t._e()]),r("td",{staticClass:"snack__note",attrs:{"data-label":"備註"}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.note,expression:"snack.note",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.note},on:{input:function(r){r.target.composing||t.$set(e,"note",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("td",{staticClass:"snack__delete"},[r("font-awesome-icon",{staticClass:"minusrow",attrs:{icon:"trash-alt",size:"lg"},on:{click:function(e){return t.minusRow("snacks",a)}}})],1)])}),0)]),r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.addMeal},attrs:{disabled:t.loading_status.addMeal},on:{click:function(e){return e.preventDefault(),t.addMeal(e)}}},[t._v("\n    新增餐點\n  ")])])},Re=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"menu-header__name main-meals__name"},[t._v("名稱")]),r("th",{staticClass:"menu-header__price main-meals__price"},[t._v("價格")]),r("th",{staticClass:"menu-header__limited main-meals__limited"},[t._v("限量(份數)")]),r("th",{staticClass:"menu-header__group main-meals__group"},[t._v("團體")]),r("th",{staticClass:"menu-header__flavor main-meals__flavor"},[t._v("口味")]),r("th",{staticClass:"menu-header__note main-meals__note"},[t._v("備註")]),r("th",{staticClass:"menu-header__delete main-meals__delete"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"menu-header__name snack__name"},[t._v("名稱")]),r("th",{staticClass:"menu-header__price snack__price"},[t._v("價格")]),r("th",{staticClass:"menu-header__limited snack__limited"},[t._v("限量(份數)")]),r("th",{staticClass:"menu-header__group snack__group"},[t._v("團體")]),r("th",{staticClass:"menu-header__flavor snack__flavor"},[t._v("口味")]),r("th",{staticClass:"menu-header__note snack__note"},[t._v("備註")]),r("th",{staticClass:"menu-header__delete snack__delete"})])])}],Ae=a("75fc"),He={name:"addmenu",props:["choose_date"],data:function(){return{loading_status:{addMeal:!1},main_meals:[{type:0,name:null,price:70,quantity_limit:null,group_id:null,flavor:null,flavor_group:[],note:null}],snacks:[{type:1,name:null,price:null,quantity_limit:null,group_id:null,flavor:null,flavor_group:[],note:null}]}},computed:{groups:function(){return this.$store.getters.groups}},methods:{addRow:function(t){var e={name:null,price:null,quantity_limit:null,group_id:null,flavor:null,flavor_group:[],note:null};"main_meals"===t?(e["type"]=0,e["price"]=70,this.main_meals.push(e)):(e["type"]=1,this.snacks.push(e))},minusRow:function(t,e){if("main_meals"===t){if(1===this.main_meals.length)return;this.main_meals.splice(e,1)}else{if(1===this.snacks.length)return;this.snacks.splice(e,1)}},addMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,r,a,n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=[].concat(Object(Ae["a"])(this.main_meals),Object(Ae["a"])(this.snacks)),e=this.removeEmptyRow(e),e=this.removeValueIsNull(e),0!==e.length){t.next=7;break}return alert("至少輸入一筆"),t.abrupt("return");case 7:if(r=e.every(function(t){return Number.isInteger(t.price)}),a=e.every(function(t){return!t.quantity_limit||!(!t.quantity_limit||!Number.isInteger(t.quantity_limit))}),n=this.Date.parse(this.choose_date).toString("yyyy/MM/d"),r){t.next=13;break}return alert("請檢查格式"),t.abrupt("return");case 13:if(a){t.next=16;break}return alert("限量需填數字"),t.abrupt("return");case 16:return e=this.mealAddDate(e),this.loading_status.addMeal=!0,t.next=20,Promise.all(e.map(function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.$store.dispatch("addDailyMenu",e);case 2:if(r=t.sent,e.flavor_group.length){t.next=5;break}return t.abrupt("return",r);case 5:return t.abrupt("return",s.addMenuFlavor(e.flavor_group,r));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 20:return this.resetMealForm(),t.next=23,this.$store.dispatch("retrieveDailyMenu",{menu_date:n});case 23:this.loading_status.addMeal=!1,t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](0),console.error(t.t0),this.loading_status.addMeal=!1;case 30:case"end":return t.stop()}},t,this,[[0,26]])}));function e(){return t.apply(this,arguments)}return e}(),removeEmptyRow:function(t){return t.filter(function(t){return!!t.name&&!!t.price})},removeValueIsNull:function(t){return t.map(function(t){var e=Object.fromEntries(Object.entries(t).filter(function(t){return""!==t[1]&&null!==t[1]}));return e})},addFlavor:function(t){t.flavor&&(t.flavor_group.push({choice:t.flavor}),t.flavor="")},deleteFlavor:function(t,e){t.flavor_group.splice(e,1)},addMenuFlavor:function(t,e){return t=t.map(function(t){return t["menu_id"]=e,t}),this.$store.dispatch("addMenuFlavor",{flavorArray:t})},resetMealForm:function(){this.main_meals=[{type:0,name:null,price:null,quantity_limit:null,group_id:null,flavor:null,flavor_group:[],note:null}],this.snacks=[{type:1,name:null,price:null,quantity_limit:null,group_id:null,flavor:null,flavor_group:[],note:null}]},mealAddDate:function(t){var e=this.Date.parse(this.choose_date).toString("yyyy/MM/d");return t.map(function(t){return t["menu_date"]=e,t})}}},Ge=He,ze=(a("4447"),Object(o["a"])(Ge,je,Re,!1,null,"86f2f2bc",null)),Le=ze.exports,Fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"menu-list section"},[r("h2",{staticClass:"title is-2"},[t._v("餐點：")]),r("table",{staticClass:"menu-list__table table is-fullwidth"},[t._m(0),r("tbody",[t._l(t.daily_menu,function(e,a){return[t.modify!==a?r("tr",{key:a,staticClass:"meal-show"},[r("td",{staticClass:"menu-list__button"},[r("div",{staticClass:"list-button"},[r("button",{staticClass:"button is-danger",class:{"is-loading":t.loading_status.deleteMeal===a},attrs:{disabled:t.loading_status.deleteMeal===a},on:{click:function(e){return t.deleteMeal(a)}}},[t._v("\n                刪除\n              ")]),r("button",{staticClass:"button is-info",on:{click:function(r){return t.modifyMeal(e,a)}}},[t._v("\n                修改\n              ")])])]),r("td",{staticClass:"menu-list__name"},[t._v(t._s(e.name))]),r("td",{staticClass:"menu-list__price"},[t._v(t._s(e.price))]),r("td",{staticClass:"menu-list__limited"},[t._v("\n            "+t._s(e.quantity_limit)+"\n          ")]),r("td",{staticClass:"menu-list__group"},[t._v("\n            "+t._s(t.convertGroupName(e.group_id))+"\n          ")]),r("td",{staticClass:"menu-list__flavor",attrs:{"data-label":"口味(用 / 區隔)"}},[e.flavors?r("div",{staticClass:"flavor--item"},t._l(e.flavors,function(e,a){return r("span",{key:a,staticClass:"flavor--item"},[t._v("\n                "+t._s(e.choice)+"\n              ")])}),0):t._e()]),r("td",{staticClass:"menu-list__note"},[t._v(t._s(e.note))])]):r("tr",{key:e.id,staticClass:"meal-modify"},[r("td",{staticClass:"menu-list__button"},[r("div",{staticClass:"list-button"},[r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.updateMeal===a},attrs:{disabled:t.loading_status.updateMeal===a},on:{click:function(e){return t.updateMeal(a)}}},[t._v("\n                送出\n              ")]),r("button",{staticClass:"button is-light",on:{click:function(r){return t.modifyMeal(e)}}},[t._v("\n                取消\n              ")])])]),r("td",{staticClass:"menu-list__name"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.change_meal.name,expression:"change_meal.name",modifiers:{trim:!0}}],staticClass:"input",class:{error:t.empty_error.name},attrs:{type:"text"},domProps:{value:t.change_meal.name},on:{input:function(e){e.target.composing||t.$set(t.change_meal,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.empty_error.name?r("span",[t._v("不得為空")]):t._e()]),r("td",{staticClass:"menu-list__price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.change_meal.price,expression:"change_meal.price",modifiers:{number:!0}}],staticClass:"input",class:{error:t.empty_error.price},attrs:{type:"tel"},domProps:{value:t.change_meal.price},on:{input:function(e){e.target.composing||t.$set(t.change_meal,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t.empty_error.price?r("span",[t._v("請填數字")]):t._e()]),r("td",{staticClass:"menu-list__limited"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.change_meal.quantity_limit,expression:"change_meal.quantity_limit",modifiers:{number:!0}}],staticClass:"input",class:{error:t.not_number_error},attrs:{type:"tel"},domProps:{value:t.change_meal.quantity_limit},on:{input:function(e){e.target.composing||t.$set(t.change_meal,"quantity_limit",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t.not_number_error?r("span",[t._v("請填數字")]):t._e()]),r("td",{staticClass:"menu-list__group"},[r("div",{staticClass:"select"},[t.groups?r("select",{directives:[{name:"model",rawName:"v-model",value:t.change_meal.group_id,expression:"change_meal.group_id"}],staticClass:"group--select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.change_meal,"group_id",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"all"}},[t._v("全體")]),t._l(t.groups,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2):t._e()])]),r("td",{staticClass:"menu-list__flavor"},[r("div",{staticClass:"change-flavor--add"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.change_flavor_name,expression:"change_flavor_name"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.change_flavor_name},on:{keypress:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.addChangeFlavor(e.id)},input:function(e){e.target.composing||(t.change_flavor_name=e.target.value)}}}),r("button",{staticClass:"button is-light",on:{click:function(r){return t.addChangeFlavor(e.id)}}},[t._v("\n                新增\n              ")])]),t.change_flavors?r("div",{staticClass:"change-flavor--list"},t._l(t.change_flavors,function(e,a){return r("div",{key:a,staticClass:"change-flavor--item"},[r("font-awesome-icon",{attrs:{icon:"times",size:"lg"},on:{click:function(e){return t.deleteChangeFlavor(a)}}}),r("span",[t._v(" "+t._s(e.choice)+" ")])],1)}),0):t._e()]),r("td",{staticClass:"menu-list__note"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.change_meal.note,expression:"change_meal.note",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.change_meal.note},on:{input:function(e){e.target.composing||t.$set(t.change_meal,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])]})],2)])])},qe=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"menu-list__button"}),r("th",{staticClass:"menu-list__name"},[t._v("名稱")]),r("th",{staticClass:"menu-list__price"},[t._v("價格")]),r("th",{staticClass:"menu-list__limited"},[t._v("限量")]),r("th",{staticClass:"menu-list__group"},[t._v("團體")]),r("th",{staticClass:"menu-list__flavor"},[t._v("口味")]),r("th",{staticClass:"menu-list__note"},[t._v("備註")])])])}],Ie=(a("20d6"),a("8615"),{name:"menuListTable",props:["choose_date"],data:function(){return{loading_status:{updateMeal:null,deleteMeal:null},modify:null,change_meal:{name:null,price:null,quantity_limit:null,group_id:"all",note:null},change_flavor_name:"",change_flavors:null,empty_error:{name:!1,price:!1},not_number_error:!1}},computed:{daily_menu:function(){return this.$store.getters.daily_menu},groups:function(){return this.$store.getters.groups}},methods:{modifyMeal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.modify=e,this.hideAllError(),this.change_meal)this.change_meal[r]=t[r];this.change_meal.group_id||(this.change_meal.group_id="all"),this.change_flavor_name="",this.change_flavors=JSON.parse(JSON.stringify(t.flavors))},updateMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r,a,n,s,i,o,u,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.hideAllError(),r=this.detectEmpty(),a=Number.isInteger(this.change_meal.price),!r&&a){t.next=7;break}return alert("請確認格式"),t.abrupt("return");case 7:if(n=Object.assign({},this.daily_menu[e]),s=n.id,i=this.Date.parse(this.choose_date).toString("yyyy/MM/d"),o=this.filterSameKey(n,e,this.change_meal),u=0===Object.keys(o).length,c=this.filterDifferentFlavors(n.flavors,this.change_flavors),l=!Object.values(c).flat().length,!u||!l){t.next=17;break}return this.modify=null,t.abrupt("return");case 17:return o["menu_date"]=i,this.loading_status.updateMeal=e,t.next=21,this.$store.dispatch("updateDailyMenu",{meal_id:s,change_meal:o});case 21:if(!c.delete){t.next=24;break}return t.next=24,this.deleteFlavor(c.delete);case 24:return t.next=26,this.addFlavor(c.new);case 26:return t.next=28,this.$store.dispatch("retrieveDailyMenu",{menu_date:i});case 28:this.modify=null,this.loading_status.updateMeal=null,t.next=36;break;case 32:t.prev=32,t.t0=t["catch"](0),console.error(t.t0),this.loading_status.updateMeal=null;case 36:case"end":return t.stop()}},t,this,[[0,32]])}));function e(e){return t.apply(this,arguments)}return e}(),addChangeFlavor:function(t){this.change_flavors.push({menu_id:t,choice:this.change_flavor_name}),this.change_flavor_name=""},deleteChangeFlavor:function(t){this.change_flavors.splice(t,1)},filterDifferentFlavors:function(t,e){if(t.length){var r=this.filterDeleteFlavor(t,e),a=e.filter(function(t){return!t.id});return{delete:r,new:a}}var n=e.filter(function(t){return!t.id});return{new:n}},filterDeleteFlavor:function(t,e){return t.filter(function(t){var r=e.some(function(e){return e.choice===t.choice&&!!e.id});return!r})},deleteMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=this.Date.parse(this.choose_date).toString("yyyy/MM/d"),t.prev=1,a=this.daily_menu[e].flavors.slice(),this.loading_status.deleteMeal=e,t.next=6,this.$store.dispatch("deleteDailyMeal",{id:this.daily_menu[e].id,index:e});case 6:if(!(a.length>0)){t.next=9;break}return t.next=9,this.deleteFlavor(a);case 9:return t.next=11,this.$store.dispatch("retrieveDailyMenu",{menu_date:r});case 11:this.loading_status.deleteMeal=null,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](1),this.$store.dispatch("retrieveDailyMenu",{menu_date:r}),console.error(t.t0),this.loading_status.deleteMeal=null;case 19:case"end":return t.stop()}},t,this,[[1,14]])}));function e(e){return t.apply(this,arguments)}return e}(),deleteFlavor:function(t){var e=this;if(t.length)return Promise.all(t.map(function(t){return e.$store.dispatch("deleteFlavor",t.id)}))},addFlavor:function(t){if(t.length)return this.$store.dispatch("addMenuFlavor",{flavorArray:t})},filterSameKey:function(t,e,r){var a=Object.entries(r);return Object.fromEntries(a.filter(function(e){var r=e[0],a=e[1];return"all"===a&&(a=null),t[r]!==a}))},convertGroupName:function(t){if(!Number.isInteger(t))return"全體";var e=this.groups.findIndex(function(e){return e["id"]===t});return this.groups[e].name},hideAllError:function(){this.not_number_error=!1,this.empty_error.name=!1,this.empty_error.price=!1},detectEmpty:function(){var t={name:this.change_meal.name,price:this.change_meal.price};return this.empty_error=Object.fromEntries(Object.entries(this.empty_error).map(function(t){return t[1]=!1,t})),t.name||(this.empty_error.name=!0),t.price||(this.empty_error.price=!0),Object.entries(t).some(function(t){return!t[1]})}}}),Ue=Ie,We=(a("51f1"),Object(o["a"])(Ue,Fe,qe,!1,null,"62d97c20",null)),Be=We.exports,Ye={name:"menu_list",components:{Header:D,Addmenu:Le,Menu_ListTable:Be},data:function(){return{choose_date:null}},created:function(){var t=this;this.choose_date=this.date_range[0],this.$store.dispatch("retrieveGroups").then(function(e){t.groups=e})},computed:{date_range:function(){return this.$store.getters.date_range},date_rang_with_note:function(){return this.date_range.map(function(t){return Date.parse(t).toString("MM/dd (ddd)")})}},watch:{choose_date:function(t){this.$store.dispatch("retrieveDailyMenu",{menu_date:this.Date.parse(t).toString("yyyy/MM/dd")}).catch(function(t){console.error(t)})}}},Je=Ye,Ve=(a("75c9"),Object(o["a"])(Je,Ee,Ne,!1,null,"ba540322",null)),Ze=Ve.exports,Ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"groups"},[r("Header"),r("Groups_detail")],1)},Qe=[],Xe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"groups_detail row"},[r("div",{staticClass:"card add-group"},[t._m(0),r("div",{staticClass:"card-content"},[r("div",{staticClass:"input-box ",class:{error:t.error}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.new_groupName,expression:"new_groupName",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:" "},domProps:{value:t.new_groupName},on:{focus:function(e){t.error=!1},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addGroup(e)},input:function(e){e.target.composing||(t.new_groupName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.error?r("span",[t._v("名稱重複或為空")]):t._e(),r("label",{attrs:{for:"register__name"}},[t._v("團體名稱")])]),r("div",{staticClass:"timelimit input-box select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.new_groupTimelimit,expression:"new_groupTimelimit",modifiers:{number:!0}}],attrs:{id:"timelimit"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.new_groupTimelimit=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"0"}},[t._v("否")]),r("option",{attrs:{value:"1"}},[t._v("是")])]),r("label",{attrs:{for:"timelimit"}},[t._v("收單時間限制")])]),"1"==t.new_groupTimelimit?r("div",{staticClass:"time"},[r("label",{attrs:{for:"timelimit"}},[t._v("收單時間")]),r("date-picker",{attrs:{type:"time","value-type":"format","time-picker-options":t.time_range,format:"HH:mm",placeholder:"Select Time"},on:{focus:function(e){t.error_time=!1}},model:{value:t.new_groupTime,callback:function(e){t.new_groupTime=e},expression:"new_groupTime"}}),t.error_time?r("span",[t._v("請填寫時間")]):t._e()],1):t._e(),r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.addGroup},attrs:{disabled:t.loading_status.addGroup},on:{click:t.addGroup}},[t._v("\n        新增\n      ")])])]),t._l(t.groups,function(e,a){return r("div",{key:e.id,staticClass:"card group-info"},[t.modify!==a?r("div",{staticClass:"group-show"},[r("div",{staticClass:"content is-medium group-show__name"},[r("h3",[t._v(t._s(e.name))])]),r("div",{staticClass:"group-show__timeLimite"},[r("h4",[t._v("\n          收單時間限制 ：\n          "+t._s(t.translateTimeLimit(e.time_limit))+"\n        ")])]),e.time_limit?r("h4",[t._v("\n        收單時間 : "+t._s(t.parseTime(e.preset_time))+"\n      ")]):t._e(),r("button",{staticClass:"button is-info",on:{click:function(r){return t.modifyGroup(e.name,e.time_limit,e.preset_time,a)}}},[t._v("\n        修改\n      ")])]):r("div",{staticClass:"group-modify"},[r("div",{staticClass:"groupName input-box",class:{error:t.changeName_error}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.change_group.name,expression:"change_group.name"}],staticClass:"input-box__name input",attrs:{type:"text",id:"change-groupName",placeholder:" "},domProps:{value:t.change_group.name},on:{focus:function(e){t.changeName_error=!1},input:function(e){e.target.composing||t.$set(t.change_group,"name",e.target.value)}}}),t.changeName_error?r("span",[t._v("名稱重複或為空")]):t._e(),r("label",{attrs:{for:"change-groupName"}},[t._v("更改團體名稱")])]),r("div",{staticClass:"timelimit select input-box"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.change_group.time_limit,expression:"change_group.time_limit"}],attrs:{id:"change-timelimit"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.change_group,"time_limit",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"0"}},[t._v("否")]),r("option",{attrs:{value:"1"}},[t._v("是")])]),r("label",{attrs:{for:"change-timelimit"}},[t._v("收單時間限制")])]),"1"==t.change_group.time_limit?r("div",{staticClass:"time input-box"},[r("date-picker",{attrs:{type:"time","value-type":"format","time-picker-options":t.time_range,format:"HH:mm",placeholder:"Select Time"},on:{focus:function(e){t.changeTime_error=!1}},model:{value:t.change_group.preset_time,callback:function(e){t.$set(t.change_group,"preset_time",e)},expression:"change_group.preset_time"}}),t.changeTime_error?r("span",[t._v("請填寫時間")]):t._e()],1):t._e(),r("button",{staticClass:"button is-info",class:{"is-loading":t.loading_status.updateGroup===a},attrs:{disabled:t.loading_status.updateGroup===a},on:{click:function(r){return t.updateGroup(e.id,a)}}},[t._v("\n        送出\n      ")]),r("button",{staticClass:"button",on:{click:function(r){return t.modifyGroup(e.name,e.time_limit,e.preset_time)}}},[t._v("\n        取消\n      ")])])])})],2)},tr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h1",{staticClass:"card-header-title"},[t._v("\n        新增團體\n      ")])])}],er=(a("7514"),a("a481"),{name:"Groups_detail",data:function(){return{loading_status:{addGroup:!1,updateGroup:null,deleteGroup:null},new_groupName:"",new_groupTime:null,new_groupTimelimit:0,change_group:{name:"",time_limit:null,preset_time:null},error:!1,error_time:!1,changeTime_error:!1,changeName_error:!1,modify:null,time_range:{start:"00:00",step:"00:30",end:"23:30"}}},created:function(){this.$store.dispatch("retrieveGroups")},computed:{groups:function(){return this.$store.getters.groups}},methods:{addGroup:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.new_groupName){t.next=3;break}return t.abrupt("return",this.error=!0);case 3:if(e=this.isSameGroupName(this.new_groupName),!e){t.next=7;break}return this.error=!0,t.abrupt("return");case 7:if(r={name:this.new_groupName,time_limit:this.new_groupTimelimit},!r.time_limit){t.next=13;break}if(this.new_groupTime){t.next=12;break}return this.error_time=!this.error_time,t.abrupt("return");case 12:r["preset_time"]=this.new_groupTime;case 13:return this.loading_status.addGroup=!0,t.next=16,this.$store.dispatch("addGroup",r).catch(function(t){console.error(t)});case 16:return t.next=18,this.$store.dispatch("retrieveGroups");case 18:this.new_groupName="",this.loading_status.addGroup=!1,t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](0),console.error(t.t0),this.loading_status.addGroup=!1;case 26:case"end":return t.stop()}},t,this,[[0,22]])}));function e(){return t.apply(this,arguments)}return e}(),modifyGroup:function(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.modify=a,this.changeTime_error=!1,this.changeName_error=!1,this.change_group.name=t,this.change_group.time_limit=e,this.change_group.preset_time=r},updateGroup:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=this.change_group.name.replace(/\s/g,""),n=this.isSameGroupName(a),s=this.filterSameKey(r,Object.assign({},this.change_group)),i=0===Object.keys(s).length,!i){t.next=8;break}return this.modify=null,t.abrupt("return");case 8:if(!(n&&n.id!==e||""===a)){t.next=11;break}return this.changeName_error=!this.changeName_error,t.abrupt("return");case 11:if(!parseInt(this.change_group.time_limit)){t.next=16;break}if(this.change_group.preset_time){t.next=15;break}return this.changeTime_error=!this.changeTime_error,t.abrupt("return");case 15:s["preset_time"]=this.parseTime(this.change_group.preset_time);case 16:return this.loading_status.updateGroup=r,t.next=19,this.$store.dispatch("updateGroups",{id:e,change_group:s}).catch(function(t){console.error(t.response.data.message)});case 19:return t.next=21,this.$store.dispatch("retrieveGroups");case 21:this.modify=null,this.loading_status.updateGroup=null,t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.error(t.t0),this.loading_status.updateGroup=null;case 29:case"end":return t.stop()}},t,this,[[0,25]])}));function e(e,r){return t.apply(this,arguments)}return e}(),isSameGroupName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.groups;return e.find(function(e){return e.name===t})},filterSameKey:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.groups,n=Object.entries(e),s=Object.assign({},a[t]);return Object.fromEntries(n.filter(function(t){var e=t[0],a=t[1];return"preset_time"===e?(s[e]=r.Date.parse(s[e]),a=r.Date.parse(a),null===s[e]||null===a?r.Date.parse(s[e])!==r.Date.parse(a):!r.Date.equals(s[e],a)):s[e]!==a}))},translateTimeLimit:function(t){return t?"是":"否"},parseTime:function(t){return this.Date.parse(t).toString("HH:mm")}}}),rr=er,ar=(a("1818"),Object(o["a"])(rr,Xe,tr,!1,null,"f54c99d0",null)),nr=ar.exports,sr={name:"groups",components:{Header:D,Groups_detail:nr}},ir=sr,or=Object(o["a"])(ir,Ke,Qe,!1,null,"16605936",null),ur=or.exports,cr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"logout"})},lr=[],dr={name:"Auth_logout",created:function(){var t=this,e=this.$store.getters.loggedIn;this.$store.dispatch("destroyAuthDetail",e).then(function(r){"boss"===e?t.$router.push({name:"adminLogin"}):t.$router.push({name:"home"})})}},mr=dr,_r=Object(o["a"])(mr,cr,lr,!1,null,null,null),hr=_r.exports,pr=(a("55dd"),a("2f62")),fr=a("bc3a"),vr=a.n(fr),gr="https://turtleeat.club/api/api",yr={200:function(t){var e=t.data.hasOwnProperty("error");if(e)return Promise.reject(t.data);Promise.resolve(t)},201:function(t){return Promise.resolve(t)},401:function(t){return t.data.error.includes("not exist")&&(alert("登入過期，請重新登入"),Tr.push({name:"home",params:{tokenExist:!0}})),Promise.reject(t.data.error)},422:function(t){return t.data.error?Promise.reject(t.data.error):t.data.message?Promise.reject(t.data.message):Promise.reject(t.data)},500:function(t){return alert("伺服器錯誤，請聯絡管理員"),Promise.reject(t.data.error)}};function br(t){return 200===t.status?Promise.resolve(t):Promise.reject(t)}function wr(t,e,r){return e&&(vr.a.defaults.headers.common["Authorization"]="Bearer ".concat(e)),r?vr.a.get(gr+t,{params:r}).catch(function(t){return t.response}).then(function(t){return yr[t.status](t)||br(t)}):vr.a.get(gr+t).catch(function(t){return t.response}).then(function(t){return yr[t.status](t)||br(t)})}function Cr(t,e,r){if(!e)throw new Error("no Token");return vr.a.defaults.headers.common["Authorization"]="Bearer ".concat(e),vr.a.patch(gr+t,r).catch(function(t){return t.response}).then(function(t){return yr[t.status](t)||br(t)})}function kr(t,e,r){return e&&(vr.a.defaults.headers.common["Authorization"]="Bearer ".concat(e)),vr.a.post(gr+t,r).catch(function(t){return t.response}).then(function(t){return yr[t.status](t)||br(t)})}function Mr(t,e,r){return vr.a.defaults.headers.common["Authorization"]="Bearer ".concat(r),vr.a.delete(gr+t+"/"+e).catch(function(t){return t.response}).then(function(t){return yr[t.status](t)||br(t)})}vr.a.defaults.headers.common["Content-Security-Policy"]="upgrade-insecure-requests";var xr={DELETE:Mr,GET:wr,POST:kr,PATCH:Cr};a("3b2b"),a("4917");
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/.
 * @website: http://www.datejs.com/
 */
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var t,e,r,a=Date,n=a.prototype,s=a.CultureInfo,i=function(t,e){return e||(e=2),("000"+t).slice(-1*e)};n.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},n.setTimeToNow=function(){var t=new Date;return this.setHours(t.getHours()),this.setMinutes(t.getMinutes()),this.setSeconds(t.getSeconds()),this.setMilliseconds(t.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(t,e){if(isNaN(t)||isNaN(e))throw new Error(t+" - "+e);if(t instanceof Date&&e instanceof Date)return t<e?-1:t>e?1:0;throw new TypeError(t+" - "+e)},a.equals=function(t,e){return 0===t.compareTo(e)},a.getDayNumberFromName=function(t){for(var e=s.dayNames,r=s.abbreviatedDayNames,a=s.shortestDayNames,n=t.toLowerCase(),i=0;i<e.length;i++)if(e[i].toLowerCase()==n||r[i].toLowerCase()==n||a[i].toLowerCase()==n)return i;return-1},a.getMonthNumberFromName=function(t){for(var e=s.monthNames,r=s.abbreviatedMonthNames,a=t.toLowerCase(),n=0;n<e.length;n++)if(e[n].toLowerCase()==a||r[n].toLowerCase()==a)return n;return-1},a.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},a.getDaysInMonth=function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},a.getTimezoneAbbreviation=function(t){for(var e=s.timezones,r=0;r<e.length;r++)if(e[r].offset===t)return e[r].name;return null},a.getTimezoneOffset=function(t){for(var e=s.timezones,r=0;r<e.length;r++)if(e[r].name===t.toUpperCase())return e[r].offset;return null},n.clone=function(){return new Date(this.getTime())},n.compareTo=function(t){return Date.compare(this,t)},n.equals=function(t){return Date.equals(this,t||new Date)},n.between=function(t,e){return this.getTime()>=t.getTime()&&this.getTime()<=e.getTime()},n.isAfter=function(t){return 1===this.compareTo(t||new Date)},n.isBefore=function(t){return-1===this.compareTo(t||new Date)},n.isToday=function(){return this.isSameDay(new Date)},n.isSameDay=function(t){return this.clone().clearTime().equals(t.clone().clearTime())},n.addMilliseconds=function(t){return this.setMilliseconds(this.getMilliseconds()+t),this},n.addSeconds=function(t){return this.addMilliseconds(1e3*t)},n.addMinutes=function(t){return this.addMilliseconds(6e4*t)},n.addHours=function(t){return this.addMilliseconds(36e5*t)},n.addDays=function(t){return this.setDate(this.getDate()+t),this},n.addWeeks=function(t){return this.addDays(7*t)},n.addMonths=function(t){var e=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},n.addYears=function(t){return this.addMonths(12*t)},n.add=function(t){if("number"==typeof t)return this._orient=t,this;var e=t;return e.milliseconds&&this.addMilliseconds(e.milliseconds),e.seconds&&this.addSeconds(e.seconds),e.minutes&&this.addMinutes(e.minutes),e.hours&&this.addHours(e.hours),e.weeks&&this.addWeeks(e.weeks),e.months&&this.addMonths(e.months),e.years&&this.addYears(e.years),e.days&&this.addDays(e.days),this},n.getWeek=function(){var a,n,s,i,o,u,c,l,d,m;return t=t||this.getFullYear(),e=e||this.getMonth()+1,r=r||this.getDate(),e<=2?(a=t-1,n=(a/4|0)-(a/100|0)+(a/400|0),s=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),d=n-s,o=0,u=r-1+31*(e-1)):(a=t,n=(a/4|0)-(a/100|0)+(a/400|0),s=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),d=n-s,o=d+1,u=r+(153*(e-3)+2)/5+58+d),c=(a+n)%7,i=(u+c-o)%7,l=u+3-i|0,m=l<0?53-((c-d)/5|0):l>364+d?1:1+(l/7|0),t=e=r=null,m},n.getISOWeek=function(){return t=this.getUTCFullYear(),e=this.getUTCMonth()+1,r=this.getUTCDate(),i(this.getWeek())},n.setWeek=function(t){return this.moveToDayOfWeek(1).addWeeks(t-this.getWeek())},a._validate=function(t,e,r,a){if("undefined"==typeof t)return!1;if("number"!=typeof t)throw new TypeError(t+" is not a Number.");if(t<e||t>r)throw new RangeError(t+" is not a valid value for "+a+".");return!0},a.validateMillisecond=function(t){return a._validate(t,0,999,"millisecond")},a.validateSecond=function(t){return a._validate(t,0,59,"second")},a.validateMinute=function(t){return a._validate(t,0,59,"minute")},a.validateHour=function(t){return a._validate(t,0,23,"hour")},a.validateDay=function(t,e,r){return a._validate(t,1,a.getDaysInMonth(e,r),"day")},a.validateMonth=function(t){return a._validate(t,0,11,"month")},a.validateYear=function(t){return a._validate(t,0,9999,"year")},n.set=function(t){return a.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),a.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),a.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),a.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),a.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),a.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),a.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&a._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},n.moveToFirstDayOfMonth=function(){return this.set({day:1})},n.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},n.moveToNthOccurrence=function(t,e){var r=0;if(e>0)r=e-1;else if(-1===e)return this.moveToLastDayOfMonth(),this.getDay()!==t&&this.moveToDayOfWeek(t,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(t,1).addWeeks(r)},n.moveToDayOfWeek=function(t,e){var r=(t-this.getDay()+7*(e||1))%7;return this.addDays(0===r?r+=7*(e||1):r)},n.moveToMonth=function(t,e){var r=(t-this.getMonth()+12*(e||1))%12;return this.addMonths(0===r?r+=12*(e||1):r)},n.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},n.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},n.setTimezoneOffset=function(t){var e=this.getTimezoneOffset(),r=-6*Number(t)/10;return this.addMinutes(r-e)},n.setTimezone=function(t){return this.setTimezoneOffset(a.getTimezoneOffset(t))},n.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},n.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},n.getUTCOffset=function(){var t,e=-10*this.getTimezoneOffset()/6;return e<0?(t=(e-1e4).toString(),t.charAt(0)+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},n.getElapsed=function(t){return(t||new Date)-this},n.toISOString||(n.toISOString=function(){function t(t){return t<10?"0"+t:t}return'"'+this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+'Z"'}),n._toString=n.toString,n.toString=function(t){var e=this;if(t&&1==t.length){var r=s.formatPatterns;switch(e.t=e.toString,t){case"d":return e.t(r.shortDate);case"D":return e.t(r.longDate);case"F":return e.t(r.fullDateTime);case"m":return e.t(r.monthDay);case"r":return e.t(r.rfc1123);case"s":return e.t(r.sortableDateTime);case"t":return e.t(r.shortTime);case"T":return e.t(r.longTime);case"u":return e.t(r.universalSortableDateTime);case"y":return e.t(r.yearMonth)}}var a=function(t){switch(1*t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return t?t.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(t){if("\\"===t.charAt(0))return t.replace("\\","");switch(e.h=e.getHours,t){case"hh":return i(e.h()<13?0===e.h()?12:e.h():e.h()-12);case"h":return e.h()<13?0===e.h()?12:e.h():e.h()-12;case"HH":return i(e.h());case"H":return e.h();case"mm":return i(e.getMinutes());case"m":return e.getMinutes();case"ss":return i(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return i(e.getFullYear(),4);case"yy":return i(e.getFullYear());case"dddd":return s.dayNames[e.getDay()];case"ddd":return s.abbreviatedDayNames[e.getDay()];case"dd":return i(e.getDate());case"d":return e.getDate();case"MMMM":return s.monthNames[e.getMonth()];case"MMM":return s.abbreviatedMonthNames[e.getMonth()];case"MM":return i(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.h()<12?s.amDesignator.substring(0,1):s.pmDesignator.substring(0,1);case"tt":return e.h()<12?s.amDesignator:s.pmDesignator;case"S":return a(e.getDate());default:return t}}):this._toString()}}(),function(){var t=Date,e=t.prototype,r=t.CultureInfo,a=Number.prototype;e._orient=1,e._nth=null,e._is=!1,e._same=!1,e._isSecond=!1,a._dateElement="day",e.next=function(){return this._orient=1,this},t.next=function(){return t.today().next()},e.last=e.prev=e.previous=function(){return this._orient=-1,this},t.last=t.prev=t.previous=function(){return t.today().last()},e.is=function(){return this._is=!0,this},e.same=function(){return this._same=!0,this._isSecond=!1,this},e.today=function(){return this.same().day()},e.weekday=function(){return!!this._is&&(this._is=!1,!this.is().sat()&&!this.is().sun())},e.at=function(e){return"string"===typeof e?t.parse(this.toString("d")+" "+e):this.set(e)},a.fromNow=a.after=function(t){var e={};return e[this._dateElement]=this,(t?t.clone():new Date).add(e)},a.ago=a.before=function(t){var e={};return e[this._dateElement]=-1*this,(t?t.clone():new Date).add(e)};var n,s="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),i="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),u="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);e.toObject=function(){for(var t={},e=0;e<o.length;e++)t[o[e].toLowerCase()]=this["get"+u[e]]();return t},t.fromObject=function(t){return t.week=null,Date.today().set(t)};for(var l=function(e){return function(){if(this._is)return this._is=!1,this.getDay()==e;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var r=this._nth;this._nth=null;var a=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(e,r),this>a)throw new RangeError(t.getDayName(e)+" does not occur "+r+" times in the month of "+t.getMonthName(a.getMonth())+" "+a.getFullYear()+".");return this}return this.moveToDayOfWeek(e,this._orient)}},d=function(e){return function(){var a=t.today(),n=e-a.getDay();return 0===e&&1===r.firstDayOfWeek&&0!==a.getDay()&&(n+=7),a.addDays(n)}},m=0;m<s.length;m++)t[s[m].toUpperCase()]=t[s[m].toUpperCase().substring(0,3)]=m,t[s[m]]=t[s[m].substring(0,3)]=d(m),e[s[m]]=e[s[m].substring(0,3)]=l(m);for(var _=function(t){return function(){return this._is?(this._is=!1,this.getMonth()===t):this.moveToMonth(t,this._orient)}},h=function(e){return function(){return t.today().set({month:e,day:1})}},p=0;p<i.length;p++)t[i[p].toUpperCase()]=t[i[p].toUpperCase().substring(0,3)]=p,t[i[p]]=t[i[p].substring(0,3)]=h(p),e[i[p]]=e[i[p].substring(0,3)]=_(p);for(var f=function(t){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var e=this.toObject(),r=(arguments[0]||new Date).toObject(),a="",n=t.toLowerCase(),s=o.length-1;s>-1;s--){if(a=o[s].toLowerCase(),e[a]!=r[a])return!1;if(n==a)break}return!0}return"s"!=t.substring(t.length-1)&&(t+="s"),this["add"+t](this._orient)}},v=function(t){return function(){return this._dateElement=t,this}},g=0;g<o.length;g++)n=o[g].toLowerCase(),e[n]=e[n+"s"]=f(o[g]),a[n]=a[n+"s"]=v(n);e._ss=f("Second");for(var y=function(t){return function(e){return this._same?this._ss(arguments[0]):e||0===e?this.moveToNthOccurrence(e,t):(this._nth=t,2!==t||void 0!==e&&null!==e?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},b=0;b<c.length;b++)e[c[b]]=y(0===b?-1:b)}(),function(){Date.Parsing={Exception:function(t){this.message="Parse error at '"+t.substring(0,10)+" ...'"}};for(var t=Date.Parsing,e=t.Operators={rtoken:function(e){return function(r){var a=r.match(e);if(a)return[a[0],r.substring(a[0].length)];throw new t.Exception(r)}},token:function(t){return function(t){return e.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return e.rtoken(new RegExp("^"+t))},until:function(t){return function(e){var r=[],a=null;while(e.length){try{a=t.call(this,e)}catch(n){r.push(a[0]),e=a[1];continue}break}return[r,e]}},many:function(t){return function(e){var r=[],a=null;while(e.length){try{a=t.call(this,e)}catch(n){return[r,e]}r.push(a[0]),e=a[1]}return[r,e]}},optional:function(t){return function(e){var r=null;try{r=t.call(this,e)}catch(a){return[null,e]}return[r[0],r[1]]}},not:function(e){return function(r){try{e.call(this,r)}catch(a){return[null,r]}throw new t.Exception(r)}},ignore:function(t){return t?function(e){var r=null;return r=t.call(this,e),[null,r[1]]}:null},product:function(){for(var t=arguments[0],r=Array.prototype.slice.call(arguments,1),a=[],n=0;n<t.length;n++)a.push(e.each(t[n],r));return a},cache:function(e){var r={},a=null;return function(n){try{a=r[n]=r[n]||e.call(this,n)}catch(s){a=r[n]=s}if(a instanceof t.Exception)throw a;return a}},any:function(){var e=arguments;return function(r){for(var a=null,n=0;n<e.length;n++)if(null!=e[n]){try{a=e[n].call(this,r)}catch(s){a=null}if(a)return a}throw new t.Exception(r)}},each:function(){var e=arguments;return function(r){for(var a=[],n=null,s=0;s<e.length;s++)if(null!=e[s]){try{n=e[s].call(this,r)}catch(i){throw new t.Exception(r)}a.push(n[0]),r=n[1]}return[a,r]}},all:function(){var t=arguments,e=e;return e.each(e.optional(t))},sequence:function(r,a,n){return a=a||e.rtoken(/^\s*/),n=n||null,1==r.length?r[0]:function(e){for(var s=null,i=null,o=[],u=0;u<r.length;u++){try{s=r[u].call(this,e)}catch(c){break}o.push(s[0]);try{i=a.call(this,s[1])}catch(l){i=null;break}e=i[1]}if(!s)throw new t.Exception(e);if(i)throw new t.Exception(i[1]);if(n)try{s=n.call(this,s[1])}catch(d){throw new t.Exception(s[1])}return[o,s?s[1]:e]}},between:function(t,a,n){n=n||t;var s=e.each(e.ignore(t),a,e.ignore(n));return function(t){var e=s.call(this,t);return[[e[0][0],r[0][2]],e[1]]}},list:function(t,r,a){return r=r||e.rtoken(/^\s*/),a=a||null,t instanceof Array?e.each(e.product(t.slice(0,-1),e.ignore(r)),t.slice(-1),e.ignore(a)):e.each(e.many(e.each(t,e.ignore(r))),px,e.ignore(a))},set:function(r,a,n){return a=a||e.rtoken(/^\s*/),n=n||null,function(s){for(var i=null,o=null,u=null,c=null,l=[[],s],d=!1,m=0;m<r.length;m++){u=null,o=null,i=null,d=1==r.length;try{i=r[m].call(this,s)}catch(p){continue}if(c=[[i[0]],i[1]],i[1].length>0&&!d)try{u=a.call(this,i[1])}catch(f){d=!0}else d=!0;if(d||0!==u[1].length||(d=!0),!d){for(var _=[],h=0;h<r.length;h++)m!=h&&_.push(r[h]);o=e.set(_,a).call(this,u[1]),o[0].length>0&&(c[0]=c[0].concat(o[0]),c[1]=o[1])}if(c[1].length<l[1].length&&(l=c),0===l[1].length)break}if(0===l[0].length)return l;if(n){try{u=n.call(this,l[1])}catch(v){throw new t.Exception(l[1])}l[1]=u[1]}return l}},forward:function(t,e){return function(r){return t[e].call(this,r)}},replace:function(t,e){return function(r){var a=t.call(this,r);return[e,a[1]]}},process:function(t,e){return function(r){var a=t.call(this,r);return[e.call(this,a[0]),a[1]]}},min:function(e,r){return function(a){var n=r.call(this,a);if(n[0].length<e)throw new t.Exception(a);return n}}},a=function(t){return function(){var e=null,r=[];if(arguments.length>1?e=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(e=arguments[0]),!e)return t.apply(null,arguments);for(var a=0,n=e.shift();a<n.length;a++)return e.unshift(n[a]),r.push(t.apply(null,e)),e.shift(),r}},n="optional not ignore cache".split(/\s/),s=0;s<n.length;s++)e[n[s]]=a(e[n[s]]);for(var i=function(t){return function(){return arguments[0]instanceof Array?t.apply(null,arguments[0]):t.apply(null,arguments)}},o="each any all".split(/\s/),u=0;u<o.length;u++)e[o[u]]=i(e[o[u]])}(),function(){var t=Date,e=(t.prototype,t.CultureInfo),r=function t(e){for(var r=[],a=0;a<e.length;a++)e[a]instanceof Array?r=r.concat(t(e[a])):e[a]&&r.push(e[a]);return r};t.Grammar={},t.Translator={hour:function(t){return function(){this.hour=Number(t)}},minute:function(t){return function(){this.minute=Number(t)}},second:function(t){return function(){this.second=Number(t)}},meridian:function(t){return function(){this.meridian=t.slice(0,1).toLowerCase()}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(t){var e=t[0];return function(){this.day=Number(e.match(/\d+/)[0])}},month:function(t){return function(){this.month=3==t.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(t)/4:Number(t)-1}},year:function(t){return function(){var r=Number(t);this.year=t.length>2?r:r+(r+2e3<e.twoDigitYearMax?2e3:1900)}},rday:function(t){return function(){switch(t){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0;break}}},finishExact:function(e){e=e instanceof Array?e:[e];for(var r=0;r<e.length;r++)e[r]&&e[r].call(this);var a=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=a.getDate()),this.year||(this.year=a.getFullYear()),this.month||0===this.month||(this.month=a.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>t.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var n=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?n.set({timezone:this.timezone}):this.timezoneOffset&&n.set({timezoneOffset:this.timezoneOffset}),n},finish:function(e){if(e=e instanceof Array?r(e):[e],0===e.length)return null;for(var a=0;a<e.length;a++)"function"==typeof e[a]&&e[a].call(this);var n=t.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(n=new Date);var s,i,o,u=!!(this.days&&null!==this.days||this.orient||this.operator);if(o="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||n.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,u=!0),!u&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(u&&this.weekday&&"month"!=this.unit&&(this.unit="day",s=t.getDayNumberFromName(this.weekday)-n.getDay(),i=7,this.days=s?(s+o*i)%i:o*i),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(n.set({day:1*this.value}),u||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,u=!0),u&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",s=this.month-n.getMonth(),i=12,this.months=s?(s+o*i)%i:o*i,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*o:null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),this[this.unit+"s"]=this.value*o),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==n.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(u&&this.timezone&&this.day&&this.days&&(this.day=this.days),u?n.add(this):n.set(this)):Date.today().setWeek(this.value)}};var a,n=t.Parsing.Operators,s=t.Grammar,i=t.Translator;s.datePartDelimiter=n.rtoken(/^([\s\-\.\,\/\x27]+)/),s.timePartDelimiter=n.stoken(":"),s.whiteSpace=n.rtoken(/^\s*/),s.generalDelimiter=n.rtoken(/^(([\s\,]|at|@|on)+)/);var o={};s.ctoken=function(t){var r=o[t];if(!r){for(var a=e.regexPatterns,s=t.split(/\s+/),i=[],u=0;u<s.length;u++)i.push(n.replace(n.rtoken(a[s[u]]),s[u]));r=o[t]=n.any.apply(null,i)}return r},s.ctoken2=function(t){return n.rtoken(e.regexPatterns[t])},s.h=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour)),s.hh=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2])/),i.hour)),s.H=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour)),s.HH=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour)),s.m=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),i.minute)),s.mm=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),i.minute)),s.s=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),i.second)),s.ss=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),i.second)),s.hms=n.cache(n.sequence([s.H,s.m,s.s],s.timePartDelimiter)),s.t=n.cache(n.process(s.ctoken2("shortMeridian"),i.meridian)),s.tt=n.cache(n.process(s.ctoken2("longMeridian"),i.meridian)),s.z=n.cache(n.process(n.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone)),s.zz=n.cache(n.process(n.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone)),s.zzz=n.cache(n.process(s.ctoken2("timezone"),i.timezone)),s.timeSuffix=n.each(n.ignore(s.whiteSpace),n.set([s.tt,s.zzz])),s.time=n.each(n.optional(n.ignore(n.stoken("T"))),s.hms,s.timeSuffix),s.d=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1]|\d)/),n.optional(s.ctoken2("ordinalSuffix"))),i.day)),s.dd=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1])/),n.optional(s.ctoken2("ordinalSuffix"))),i.day)),s.ddd=s.dddd=n.cache(n.process(s.ctoken("sun mon tue wed thu fri sat"),function(t){return function(){this.weekday=t}})),s.M=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d|\d)/),i.month)),s.MM=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d)/),i.month)),s.MMM=s.MMMM=n.cache(n.process(s.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month)),s.y=n.cache(n.process(n.rtoken(/^(\d\d?)/),i.year)),s.yy=n.cache(n.process(n.rtoken(/^(\d\d)/),i.year)),s.yyy=n.cache(n.process(n.rtoken(/^(\d\d?\d?\d?)/),i.year)),s.yyyy=n.cache(n.process(n.rtoken(/^(\d\d\d\d)/),i.year)),a=function(){return n.each(n.any.apply(null,arguments),n.not(s.ctoken2("timeContext")))},s.day=a(s.d,s.dd),s.month=a(s.M,s.MMM),s.year=a(s.yyyy,s.yy),s.orientation=n.process(s.ctoken("past future"),function(t){return function(){this.orient=t}}),s.operator=n.process(s.ctoken("add subtract"),function(t){return function(){this.operator=t}}),s.rday=n.process(s.ctoken("yesterday tomorrow today now"),i.rday),s.unit=n.process(s.ctoken("second minute hour day week month year"),function(t){return function(){this.unit=t}}),s.value=n.process(n.rtoken(/^\d\d?(st|nd|rd|th)?/),function(t){return function(){this.value=t.replace(/\D/g,"")}}),s.expression=n.set([s.rday,s.operator,s.value,s.unit,s.orientation,s.ddd,s.MMM]),a=function(){return n.set(arguments,s.datePartDelimiter)},s.mdy=a(s.ddd,s.month,s.day,s.year),s.ymd=a(s.ddd,s.year,s.month,s.day),s.dmy=a(s.ddd,s.day,s.month,s.year),s.date=function(t){return(s[e.dateElementOrder]||s.mdy).call(this,t)},s.format=n.process(n.many(n.any(n.process(n.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(s[e])return s[e];throw t.Parsing.Exception(e)}),n.process(n.rtoken(/^[^dMyhHmstz]+/),function(t){return n.ignore(n.stoken(t))}))),function(t){return n.process(n.each.apply(null,t),i.finishExact)});var u={},c=function(t){return u[t]=u[t]||s.format(t)[0]};s.formats=function(t){if(t instanceof Array){for(var e=[],r=0;r<t.length;r++)e.push(c(t[r]));return n.any.apply(null,e)}return c(t)},s._formats=s.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),s._start=n.process(n.set([s.date,s.time,s.expression],s.generalDelimiter,s.whiteSpace),i.finish),s.start=function(t){try{var e=s._formats.call({},t);if(0===e[1].length)return e}catch(r){}return s._start.call({},t)},t._parse=t.parse,t.parse=function(e){var r=null;if(!e)return null;if(e instanceof Date)return e;try{r=t.Grammar.start.call({},e.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(a){return null}return 0===r[1].length?r[0]:null},t.getParseFunction=function(e){var r=t.Grammar.formats(e);return function(t){var e=null;try{e=r.call({},t)}catch(a){return null}return 0===e[1].length?e[0]:null}},t.parseExact=function(e,r){return t.getParseFunction(r)(e)}}();var Dr=Date;n["a"].use(pr["a"]);var Or=new pr["a"].Store({state:{token:localStorage.getItem("api_token")||null,login_role:localStorage.getItem("login_role")||"guest",member_profile:JSON.parse(localStorage.getItem("user_profile"))||null,user_id:localStorage.getItem("user_id")||null,groups:JSON.parse(localStorage.getItem("groups"))||null,daily_menu:JSON.parse(localStorage.getItem("daily_menu"))||[],member_daily_menu:JSON.parse(localStorage.getItem("member_daily_menu"))||null,order_detail_statistic:JSON.parse(localStorage.getItem("order_detail_statistic"))||[],purchase_list:[],boss_history_statistic_all:{},boss_history_statistic_groups:{},boss_menu_statistic:{},member_history_list:{},date_range:7,week_range:4},getters:{loggedIn:function(t){return t.login_role},groups:function(t){return t.groups},daily_menu:function(t){return t.daily_menu.sort(function(t,e){return e.id-t.id})},purchase_list:function(t){return t.purchase_list.sort(function(t,e){return e.id-t.id})},member_history_list:function(t){return Object.keys(t.member_history_list).length?(t.member_history_list.list=t.member_history_list.list.map(function(t){return t.menu_date=Dr.parse(t.menu_date).toString("MM/dd"),t}),t.member_history_list):{}},boss_history_statistic_all:function(t){var e=!Object.keys(t.boss_history_statistic_all).length;return!e&&t.boss_history_statistic_all},boss_history_statistic_groups:function(t){var e=t.groups.length===Object.keys(t.boss_history_statistic_groups).length;return!!e&&t.boss_history_statistic_groups},boss_menu_statistic:function(t){var e=!Object.keys(t.boss_menu_statistic).length;return!e&&(t.boss_menu_statistic.list=t.boss_menu_statistic.list.sort(function(t,e){return t.menu_name.charCodeAt()-e.menu_name.charCodeAt()}),t.boss_menu_statistic)},member_order_menu:function(t){return t.member_daily_menu?t.member_daily_menu.map(function(t){var e={};return e["id"]=t["id"],e["name"]=t["name"],e["meal_note"]=t["note"],e["price"]=t["price"],e["quantity_limit"]=t["quantity_limit"],e["flavors"]=t["flavors"],e["amount"]=t["amount"],e}):[]},member_menu:function(t){return t.member_daily_menu},member_order_check:function(t){return t.order_detail_statistic},member_profile:function(t){return t.member_profile},member_order_timeLimit:function(t){if(!t.groups||!t.member_profile)return null;var e=t.member_profile,r=t.groups.find(function(t){return t.id===e.group_id});return r.time_limit?Dr.parse(r.preset_time).toString("HH:mm"):null},date_range:function(t){var e=new Array(t.date_range).fill(0);return e.map(function(t,e){var r=Dr.today().add(e+1).day();return r.toString("MM/dd")}).filter(function(t){return Dr.parse(t).is().weekday()})},week_range:function(t){var e=new Array(t.week_range).fill(0);return e.map(function(t,e){var r=Dr.sun().mon().addWeeks(-3).add({weeks:e}),a=Dr.sun().mon().addWeeks(-3).add({weeks:e,days:6});return"".concat(r.toString("MM/dd"),"~").concat(a.toString("MM/dd"))})}},mutations:{initialAuthDetail:function(t,e){t.token=e.api_token,t.login_role=e.role,t.user_id=e.id},initialMemberProfile:function(t,e){var r={name:e.name,account:e.account,rice:e.rice,vegetable:e.vegetable,group_id:e.group_id,note:e.note};localStorage.setItem("user_profile",JSON.stringify(r)),t.member_profile=r},retrieveGroups:function(t,e){t.groups=e},retrieveMemberDailyMenu:function(t,e){t.member_daily_menu=e.map(function(t){return t["amount"]=0,t}),localStorage.setItem("member_daily_menu",JSON.stringify(e))},retrieveMemberHistoryList:function(t,e){t.member_history_list=e},retrieveBossHistoryStatisticAll:function(t,e){t.boss_history_statistic_all=e},retrieveBossHistoryStatisticWithGroup:function(t,e){var r=e.group_name;n["a"].set(t.boss_history_statistic_groups,r,e.group_statistic)},retrieveDailyMenu:function(t,e){localStorage.setItem("daily_menu",JSON.stringify(e)),t.daily_menu=e},retrieveBossMenuStatistic:function(t,e){t.boss_menu_statistic=e},updateMemberOrderAmount:function(t,e){var r=e.index;t.member_daily_menu[r].amount+=e.amount},updateOrderDetailStatistic:function(t,e){var r=e.index,a=e.name;t.order_detail_statistic[r][a]=e.value},updateMemberPaidStatus:function(t,e){var r=e.group_name,a=e.index,n=t.boss_history_statistic_groups[r].list[a].payment_status,s=Number(t.boss_history_statistic_groups[r].list[a].person_paid);t.boss_history_statistic_groups[r].list[a].payment_status=!n,t.boss_history_statistic_groups[r].statistic.paid=Number(t.boss_history_statistic_groups[r].statistic.paid),t.boss_history_statistic_groups[r].statistic.unpaid=Number(t.boss_history_statistic_groups[r].statistic.unpaid),n?(t.boss_history_statistic_groups[r].statistic.paid-=s,t.boss_history_statistic_groups[r].statistic.unpaid+=s):(t.boss_history_statistic_groups[r].statistic.paid+=s,t.boss_history_statistic_groups[r].statistic.unpaid-=s)},generateOrderDetailStatistic:function(t){var e=t.member_daily_menu,r=t.member_profile;t.order_detail_statistic=e.map(function(t){if(t.amount<=0)return[];var e=t.flavors[0]?t.flavors[0].id:null;return new Array(t.amount).fill().map(function(){var a={menu_id:t.id,name:t.name,flavors:t.flavors,flavor_id:e,quantity:1,note:r.note};return 0===t.type&&(a["user_rice"]=r.rice,a["user_vegetable"]=r.vegetable),a})}).flat()},retrievePurchaseList:function(t,e){t.purchase_list=e},updateDailyMenu:function(t,e){var r=t.daily_menu.findIndex(function(t){return t["id"]=e["id"]});e["flavors"]||(e["flavors"]=[]),t.daily_menu[r]=e},updateGroups:function(t,e){t.groups[e.index]=e.change_group},deleteDailyMeal:function(t,e){t.daily_menu.splice(e,1)},destroyAuthDetail:function(t){t.token=null,t.login_role="guest",t.user_id=null,localStorage.clear()}},actions:{updateMemberOrderAmount:function(t,e){var r=t.commit;r("updateMemberOrderAmount",e)},updateOrderDetailStatistic:function(t,e){var r=t.commit;r("updateOrderDetailStatistic",e)},generateOrderDetailStatistic:function(t){var e=t.commit;e("generateOrderDetailStatistic")},clearToken:function(t){var e=t.commit;e("destroyAuthDetail")},addMemberOrder:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.POST("/order",a.token,r);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),updateMemberOrder:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=r.order_id,s=r.change_meal,t.prev=2,t.next=5,xr.PATCH("/order/".concat(n),a.token,s);case 5:return i=t.sent,o=i.data,t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t["catch"](2),t.t0;case 13:case"end":return t.stop()}},t,null,[[2,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),register:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xr.POST("/member",null,r);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t["catch"](0),t.t0;case 10:case"end":return t.stop()}},t,null,[[0,7]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveMemberDailyMenu:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/viewmenus",a.token,r);case 4:return s=t.sent,i=s.data,n("retrieveMemberDailyMenu",i),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),t.t0;case 13:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveDailyMenu:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/dailymenu",a.token,r);case 4:return s=t.sent,i=s.data,n("retrieveDailyMenu",i),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),t.t0;case 13:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrievePurchaseList:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/order",a.token,r);case 4:s=t.sent,i=s.data,n("retrievePurchaseList",i),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](1),t.t0;case 12:case"end":return t.stop()}},t,null,[[1,9]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveMemberHistoryList:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/personal/count",a.token,r);case 4:s=t.sent,i=s.data,n("retrieveMemberHistoryList",i),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](1),t.t0;case 12:case"end":return t.stop()}},t,null,[[1,9]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveBossHistoryStatisticAll:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/group/count",a.token,r);case 4:return s=t.sent,i=s.data,n("retrieveBossHistoryStatisticAll",i),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),t.t0;case 13:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveBossHistoryStatisticWithGroup:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/group/count",a.token,{start_date:r.start_date,end_date:r.end_date,group_id:r.group_id});case 4:return s=t.sent,i=s.data,n("retrieveBossHistoryStatisticWithGroup",{group_statistic:i,group_name:r.group_name}),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),t.t0;case 13:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveBossMenuStatistic:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.GET("/count/menu",a.token,r);case 4:return s=t.sent,i=s.data,n("retrieveBossMenuStatistic",i),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t["catch"](1),t.t0;case 13:case"end":return t.stop()}},t,null,[[1,10]])}));function e(e,r){return t.apply(this,arguments)}return e}(),deletePurchaseMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.DELETE("/order",r,a.token);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),updateMemberPaidStatus:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.PATCH("/paidstatus",a.token,r);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),addDailyMenu:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.POST("/menus",a.token,r);case 4:return n=t.sent,t.abrupt("return",n.data.id);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),addMenuFlavor:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.POST("/flavors",a.token,r);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),updateDailyMenu:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.PATCH("/menus/".concat(r.meal_id),a.token,r.change_meal);case 4:return s=t.sent,n("updateDailyMenu",s.data),t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t["catch"](1),t.t0;case 12:case"end":return t.stop()}},t,null,[[1,9]])}));function e(e,r){return t.apply(this,arguments)}return e}(),updateMenuFlavor:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.PATCH("/flavors/".concat(r.flavor_id),a.token,r.change_flavor);case 4:s=t.sent,n("updateDailyMenu",s.data),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),deleteDailyMeal:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,xr.DELETE("/menus",r.id,a.token);case 4:return s=t.sent,n("deleteDailyMeal",r.index),t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t["catch"](1),t.t0;case 12:case"end":return t.stop()}},t,null,[[1,9]])}));function e(e,r){return t.apply(this,arguments)}return e}(),deleteFlavor:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.DELETE("/flavors",r,a.token);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),addGroup:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.POST("/groups",a.token,r);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),updateGroups:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,t.prev=1,t.next=4,xr.PATCH("/groups/".concat(r.id),a.token,r.change_group);case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveGroups:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xr.GET("/groups");case 3:return r=t.sent,a=r.data,localStorage.setItem("groups",JSON.stringify(a)),e.commit("retrieveGroups",a),t.abrupt("return",a);case 10:throw t.prev=10,t.t0=t["catch"](0),t.t0;case 13:case"end":return t.stop()}},t,null,[[0,10]])}));function e(e){return t.apply(this,arguments)}return e}(),updateMemberProfile:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.state,t.prev=1,t.next=4,xr.PATCH("/member/".concat(n.user_id),n.token,r);case 4:if(s=t.sent,i=s.data,"string"!==typeof i){t.next=8;break}throw i;case 8:a("initialMemberProfile",i),t.next=14;break;case 11:throw t.prev=11,t.t0=t["catch"](1),t.t0;case 14:case"end":return t.stop()}},t,null,[[1,11]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveMemberToken:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xr.POST("/member/login",null,r);case 3:if(a=t.sent,n=a.data,"string"!==typeof n){t.next=7;break}throw n;case 7:s={id:n.id,api_token:n.api_token,role:"member"},localStorage.setItem("user_id",s.id),localStorage.setItem("api_token",s.api_token),localStorage.setItem("login_role",s.role),e.commit("initialAuthDetail",s),e.commit("initialMemberProfile",n),t.next=18;break;case 15:throw t.prev=15,t.t0=t["catch"](0),t.t0;case 18:case"end":return t.stop()}},t,null,[[0,15]])}));function e(e,r){return t.apply(this,arguments)}return e}(),retrieveBossToken:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xr.POST("/boss/login",null,r);case 3:if(a=t.sent,n=a.data,"string"!==typeof n){t.next=7;break}throw n;case 7:return s={id:n.id,api_token:n.api_token,role:"boss"},localStorage.setItem("user_id",s.id),localStorage.setItem("api_token",s.api_token),localStorage.setItem("login_role",s.role),e.commit("initialAuthDetail",s),t.abrupt("return",n);case 15:throw t.prev=15,t.t0=t["catch"](0),t.t0;case 18:case"end":return t.stop()}},t,null,[[0,15]])}));function e(e,r){return t.apply(this,arguments)}return e}(),destroyAuthDetail:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var a,n,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.state,s="/".concat(r,"/logout"),t.prev=2,i=xr.DELETE(s,n.user_id,n.token),localStorage.clear(),a("destroyAuthDetail"),t.abrupt("return",i);case 9:throw t.prev=9,t.t0=t["catch"](2),a("destroyAuthDetail"),t.t0;case 13:case"end":return t.stop()}},t,null,[[2,9]])}));function e(e,r){return t.apply(this,arguments)}return e}()}});n["a"].use(d["a"]);var Sr=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:T},{path:"/admin",name:"adminLogin",component:q},{path:"/register",name:"register",component:tt},{path:"/profile",name:"profile",component:gt,meta:{requiresAuth:!0}},{path:"/order",name:"order",component:Mt,meta:{requiresAuth:!0},children:[{path:"menu",name:"order_menu",props:function(t){return{notReload:!!t.params.notReload&&t.params.notReload,date:t.params.date?t.params.date:null}},component:Tt,beforeEnter:function(t,e,r){return"register"===e.name?(alert("可以到個人檔案填寫常用資訊喔！"),r()):"order_check"===e.name?r():void Or.dispatch("retrieveGroups").then(function(){r()})}},{path:"check",name:"order_check",component:At,props:function(t){return{choose_date:t.params.choose_date}},beforeEnter:function(t,e,r){Or.getters.member_order_check.length?r():r({name:"order_menu"})}}]},{path:"/purchase",name:"purchase",component:Jt,props:function(t){return{order_date:t.params.order_date}},meta:{requiresAuth:!0}},{path:"/history",name:"history",component:ye,meta:{requiresAuth:!0}},{path:"/statistic",name:"statistic",component:Pe,meta:{requiresAuth:!0,isBoss:!0}},{path:"/menu",name:"menu",component:Ze,meta:{requiresAuth:!0,isBoss:!0}},{path:"/groups",name:"groups",component:ur,meta:{requiresAuth:!0,isBoss:!0}},{path:"/logout",name:"logout",component:hr,meta:{requiresAuth:!0}}]}),$r={guest:["home","adminLogin","register"],member:["order_menu","order_check","profile","history","logout","purchase"],boss:["statistic","menu","groups","history","logout"]};Sr.beforeEach(function(t,e,r){t.params.tokenExist&&Or.dispatch("clearToken");var a=Or.getters.loggedIn,n=$r[a];return n.includes(t.name)?r():r({name:n[0]})});var Tr=Sr,Pr=(a("92c6"),a("ecee")),Er=a("c074"),Nr=a("ad3d"),jr=a("ea76"),Rr=a.n(jr);Pr["c"].add(Er["e"],Er["b"],Er["a"],Er["c"],Er["d"]),n["a"].prototype.Date=Dr,n["a"].component("font-awesome-icon",Nr["a"]),n["a"].config.productionTip=!1,n["a"].use(Rr.a),new n["a"]({router:Tr,store:Or,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("5e27"),n=r.n(a);n.a},"5e27":function(t,e,r){},6346:function(t,e,r){"use strict";var a=r("e722"),n=r.n(a);n.a},6824:function(t,e,r){},"68c7":function(t,e,r){},"6f0e":function(t,e,r){"use strict";var a=r("34e7"),n=r.n(a);n.a},"75c9":function(t,e,r){"use strict";var a=r("f413"),n=r.n(a);n.a},"7c69":function(t,e,r){"use strict";var a=r("1c14"),n=r.n(a);n.a},"7ce9":function(t,e,r){},"7ea8":function(t,e,r){},8848:function(t,e,r){"use strict";var a=r("3e47"),n=r.n(a);n.a},"919c":function(t,e,r){},"9c6c7":function(t,e,r){},"9d1a":function(t,e,r){"use strict";var a=r("f5b1"),n=r.n(a);n.a},ad50:function(t,e,r){"use strict";var a=r("eead"),n=r.n(a);n.a},b04c:function(t,e,r){},b529:function(t,e,r){},bc2c:function(t,e,r){"use strict";var a=r("919c"),n=r.n(a);n.a},c2c3:function(t,e,r){},c69b:function(t,e,r){"use strict";var a=r("7ea8"),n=r.n(a);n.a},c6a2:function(t,e,r){},ca99:function(t,e,r){"use strict";var a=r("9c6c7"),n=r.n(a);n.a},d51c:function(t,e,r){"use strict";var a=r("7ce9"),n=r.n(a);n.a},dac3:function(t,e,r){},e722:function(t,e,r){},eead:function(t,e,r){},f413:function(t,e,r){},f5b1:function(t,e,r){},f5d8:function(t,e,r){"use strict";var a=r("c2c3"),n=r.n(a);n.a}});
//# sourceMappingURL=app.ff0f4978.js.map